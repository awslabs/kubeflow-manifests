<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.93.0" />
<meta name="robots" content="index, follow">

<script type="application/ld+json">
  {
      "@context" : "http://schema.org",
      "@type" : "WebSite",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "https:\/\/awslabs.github.io\/kubeflow-manifests\/main"
      },
      "articleSection" : "docs",
      "name" : "Manual Deployment Guide",
      "headline" : "Manual Deployment Guide",
      "description" : "Deploying Kubeflow with AWS Cognito as identity provider using Kustomize or Helm",
      "inLanguage" : "en-US",
      "author" : "",
      "creator" : "",
      "publisher": "",
      "accountablePerson" : "",
      "copyrightHolder" : "",
      "copyrightYear" : "0001",
      "datePublished": "0001-01-01 00:00:00 \u002b0000 UTC",
      "dateModified" : "0001-01-01 00:00:00 \u002b0000 UTC",
      "url" : "https:\/\/awslabs.github.io\/kubeflow-manifests\/main\/docs\/deployment\/cognito\/manifest\/guide\/",
      "wordCount" : "1356",
      "keywords" : [ "Kubeflow" ]
  }
  </script>

<link rel="shortcut icon" href="/kubeflow-manifests/main/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/kubeflow-manifests/main/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/kubeflow-manifests/main/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/kubeflow-manifests/main/favicons/favicon-32x32.png" sizes="32x32">
<link rel="manifest" href="/kubeflow-manifests/main/favicons/manifest.json">
<meta name="msapplication-config" content="/kubeflow-manifests/main/favicons/browserconfig.xml" />
<meta name="msapplication-TileColor" content="#4279f4">
<meta name="theme-color" content="#4279f4">

<title>Manual Deployment Guide | Kubeflow on AWS</title>
<meta name="description" content="Deploying Kubeflow with AWS Cognito as identity provider using Kustomize or Helm">
<meta property="og:title" content="Manual Deployment Guide" />
<meta property="og:description" content="Deploying Kubeflow with AWS Cognito as identity provider using Kustomize or Helm" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://awslabs.github.io/kubeflow-manifests/main/docs/deployment/cognito/manifest/guide/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2023-03-20T11:22:19-07:00" /><meta property="og:site_name" content="Kubeflow on AWS" />

<meta itemprop="name" content="Manual Deployment Guide">
<meta itemprop="description" content="Deploying Kubeflow with AWS Cognito as identity provider using Kustomize or Helm">
<meta itemprop="dateModified" content="2023-03-20T11:22:19-07:00" />
<meta itemprop="wordCount" content="1356">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Manual Deployment Guide"/>
<meta name="twitter:description" content="Deploying Kubeflow with AWS Cognito as identity provider using Kustomize or Helm"/>




<link rel="preload" href="/kubeflow-manifests/main/scss/main.min.8e19d503dc21f6c6cf4fc5e28fb0ba07d2e0fc64f2245365f16c8e79c3f69bf1.css" as="style">
<link href="/kubeflow-manifests/main/scss/main.min.8e19d503dc21f6c6cf4fc5e28fb0ba07d2e0fc64f2245365f16c8e79c3f69bf1.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

    
    <link href="/kubeflow-manifests/main/css/syntax.min.css" rel="stylesheet">

    
    <link href="/kubeflow-manifests/main/css/copy-code-button.min.css" rel="stylesheet">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />


  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand-md navbar-dark  td-navbar">
        <a class="navbar-brand" href="/kubeflow-manifests/main/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">Kubeflow on AWS</span>
	</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main_navbar" aria-controls="main_navbar" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse ml-md-auto" id="main_navbar">
		<ul class="navbar-nav ml-auto pt-4 pt-md-0 my-2 my-md-1">
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				<div id="docsearch"></div>
			</li>

			
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/kubeflow-manifests/main/docs/" ><i class='fas fa-book pr-2'></i><span>Documentation</span></a>
			</li>
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/kubeflow-manifests/main/blog/" ><i class='fas fa-blog pr-2'></i><span>Blog</span></a>
			</li>
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://github.com/awslabs/kubeflow-manifests" target="_blank" ><i class='fab fa-github pr-2'></i><span>GitHub</span></a>
			</li>
			
			
			<li class="nav-item dropdown mt-1 mt-lg-0 mr-2">
				<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Releases
</a>
<div class="dropdown-menu dropdown-menu-md-right dropdown-menu-lg-left" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="https://awslabs.github.io/kubeflow-manifests/docs">latest</a>
	
	<a class="dropdown-item" href="https://awslabs.github.io/kubeflow-manifests/release-v1.6.1-aws-b1.0.0/docs">v1.6</a>
	
	<a class="dropdown-item" href="https://awslabs.github.io/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs">v1.5</a>
	
	<a class="dropdown-item" href="https://awslabs.github.io/kubeflow-manifests/release-v1.4.1-aws-b1.0.0/docs">v1.4</a>
	
	<a class="dropdown-item" href="https://awslabs.github.io/kubeflow-manifests/main/docs">dev</a>
	
</div>

			</li>
			
			
		</ul>
	</div>
	
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="collapse td-sidebar-nav foldable-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-kubeflow-manifestsmaindocs-li">
  <a href="/kubeflow-manifests/main/docs/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-kubeflow-manifestsmaindocs"><span class="">Documentation</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-kubeflow-manifestsmaindocsabout-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsabout-check"/>
  <label for="m-kubeflow-manifestsmaindocsabout-check"><a href="/kubeflow-manifests/main/docs/about/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsmaindocsabout"><span class="">About</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsaboutfeatures-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsaboutfeatures-check"/>
  <label for="m-kubeflow-manifestsmaindocsaboutfeatures-check"><a href="/kubeflow-manifests/main/docs/about/features/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsaboutfeatures"><span class="">AWS Features for Kubeflow</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsaboutreleases-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsaboutreleases-check"/>
  <label for="m-kubeflow-manifestsmaindocsaboutreleases-check"><a href="/kubeflow-manifests/main/docs/about/releases/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsaboutreleases"><span class="">Releases and Versioning</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsabouteks-compatibility-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsabouteks-compatibility-check"/>
  <label for="m-kubeflow-manifestsmaindocsabouteks-compatibility-check"><a href="/kubeflow-manifests/main/docs/about/eks-compatibility/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsabouteks-compatibility"><span class="">Amazon EKS and Kubeflow Compatibility</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsaboutsecurity-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsaboutsecurity-check"/>
  <label for="m-kubeflow-manifestsmaindocsaboutsecurity-check"><a href="/kubeflow-manifests/main/docs/about/security/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsaboutsecurity"><span class="">Security</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsaboutusage-tracking-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsaboutusage-tracking-check"/>
  <label for="m-kubeflow-manifestsmaindocsaboutusage-tracking-check"><a href="/kubeflow-manifests/main/docs/about/usage-tracking/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsaboutusage-tracking"><span class="">Usage Tracking</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-kubeflow-manifestsmaindocsdeployment-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeployment-check" checked/>
  <label for="m-kubeflow-manifestsmaindocsdeployment-check"><a href="/kubeflow-manifests/main/docs/deployment/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsmaindocsdeployment"><span class="">Deployment Options</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsdeploymentprerequisites-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentprerequisites-check"/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentprerequisites-check"><a href="/kubeflow-manifests/main/docs/deployment/prerequisites/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsdeploymentprerequisites"><span class="">Prerequisites</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsdeploymentcreate-eks-cluster-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentcreate-eks-cluster-check"/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentcreate-eks-cluster-check"><a href="/kubeflow-manifests/main/docs/deployment/create-eks-cluster/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsdeploymentcreate-eks-cluster"><span class="">Create an EKS Cluster</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-kubeflow-manifestsmaindocsdeploymentvanilla-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentvanilla-check"/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentvanilla-check"><a href="/kubeflow-manifests/main/docs/deployment/vanilla/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsmaindocsdeploymentvanilla"><span class="">Vanilla Installation</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsdeploymentvanillaguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentvanillaguide-check"/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentvanillaguide-check"><a href="/kubeflow-manifests/main/docs/deployment/vanilla/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsdeploymentvanillaguide"><span class="">Manifest Deployment Guide</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsdeploymentvanillaguide-terraform-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentvanillaguide-terraform-check"/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentvanillaguide-terraform-check"><a href="/kubeflow-manifests/main/docs/deployment/vanilla/guide-terraform/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsdeploymentvanillaguide-terraform"><span class="">Terraform Deployment Guide</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-kubeflow-manifestsmaindocsdeploymentrds-s3-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentrds-s3-check"/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentrds-s3-check"><a href="/kubeflow-manifests/main/docs/deployment/rds-s3/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsmaindocsdeploymentrds-s3"><span class="">RDS and S3</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsdeploymentrds-s3guide-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentrds-s3guide-check"/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentrds-s3guide-check"><a href="/kubeflow-manifests/main/docs/deployment/rds-s3/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsdeploymentrds-s3guide"><span class="">Manifest Deployment Guide</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsdeploymentrds-s3guide-terraform-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentrds-s3guide-terraform-check"/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentrds-s3guide-terraform-check"><a href="/kubeflow-manifests/main/docs/deployment/rds-s3/guide-terraform/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsdeploymentrds-s3guide-terraform"><span class="">Terraform Deployment Guide</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-kubeflow-manifestsmaindocsdeploymentcognito-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentcognito-check" checked/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentcognito-check"><a href="/kubeflow-manifests/main/docs/deployment/cognito/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsmaindocsdeploymentcognito"><span class="">Cognito</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-kubeflow-manifestsmaindocsdeploymentcognitomanifest-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentcognitomanifest-check" checked/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentcognitomanifest-check"><a href="/kubeflow-manifests/main/docs/deployment/cognito/manifest/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsmaindocsdeploymentcognitomanifest"><span class="">Manifest Deployment Guides</span></a></label>
  
  <ul class="ul-4 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsdeploymentcognitomanifestguide-automated-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentcognitomanifestguide-automated-check"/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentcognitomanifestguide-automated-check"><a href="/kubeflow-manifests/main/docs/deployment/cognito/manifest/guide-automated/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsdeploymentcognitomanifestguide-automated"><span class="">Automated Deployment Guide</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-kubeflow-manifestsmaindocsdeploymentcognitomanifestguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentcognitomanifestguide-check" checked/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentcognitomanifestguide-check"><a href="/kubeflow-manifests/main/docs/deployment/cognito/manifest/guide/" class="align-left pl-0  active td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsdeploymentcognitomanifestguide"><span class="td-sidebar-nav-active-item">Manual Deployment Guide</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsdeploymentcognitoguide-terraform-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentcognitoguide-terraform-check"/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentcognitoguide-terraform-check"><a href="/kubeflow-manifests/main/docs/deployment/cognito/guide-terraform/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsdeploymentcognitoguide-terraform"><span class="">Terraform Deployment Guide</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-kubeflow-manifestsmaindocsdeploymentcognito-rds-s3-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentcognito-rds-s3-check"/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentcognito-rds-s3-check"><a href="/kubeflow-manifests/main/docs/deployment/cognito-rds-s3/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsmaindocsdeploymentcognito-rds-s3"><span class="">Cognito, RDS, and S3</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsdeploymentcognito-rds-s3guide-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentcognito-rds-s3guide-check"/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentcognito-rds-s3guide-check"><a href="/kubeflow-manifests/main/docs/deployment/cognito-rds-s3/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsdeploymentcognito-rds-s3guide"><span class="">Manifest Deployment Guide</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsdeploymentcognito-rds-s3guide-terraform-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentcognito-rds-s3guide-terraform-check"/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentcognito-rds-s3guide-terraform-check"><a href="/kubeflow-manifests/main/docs/deployment/cognito-rds-s3/guide-terraform/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsdeploymentcognito-rds-s3guide-terraform"><span class="">Terraform Deployment Guide</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsdeploymentconnect-kubeflow-dashboard-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentconnect-kubeflow-dashboard-check"/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentconnect-kubeflow-dashboard-check"><a href="/kubeflow-manifests/main/docs/deployment/connect-kubeflow-dashboard/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsdeploymentconnect-kubeflow-dashboard"><span class="">Connect to your Kubeflow Dashboard</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsdeploymentconfigure-notebook-culling-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsdeploymentconfigure-notebook-culling-check"/>
  <label for="m-kubeflow-manifestsmaindocsdeploymentconfigure-notebook-culling-check"><a href="/kubeflow-manifests/main/docs/deployment/configure-notebook-culling/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsdeploymentconfigure-notebook-culling"><span class="">Configure Culling for Notebooks</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-kubeflow-manifestsmaindocsadd-ons-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsadd-ons-check"/>
  <label for="m-kubeflow-manifestsmaindocsadd-ons-check"><a href="/kubeflow-manifests/main/docs/add-ons/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsmaindocsadd-ons"><span class="">Deployment Add-ons</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsadd-onsload-balancerguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsadd-onsload-balancerguide-check"/>
  <label for="m-kubeflow-manifestsmaindocsadd-onsload-balancerguide-check"><a href="/kubeflow-manifests/main/docs/add-ons/load-balancer/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsadd-onsload-balancerguide"><span class="">Load Balancer</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsadd-onsstorageefsguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsadd-onsstorageefsguide-check"/>
  <label for="m-kubeflow-manifestsmaindocsadd-onsstorageefsguide-check"><a href="/kubeflow-manifests/main/docs/add-ons/storage/efs/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsadd-onsstorageefsguide"><span class="">EFS</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsadd-onsstoragefsx-for-lustreguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsadd-onsstoragefsx-for-lustreguide-check"/>
  <label for="m-kubeflow-manifestsmaindocsadd-onsstoragefsx-for-lustreguide-check"><a href="/kubeflow-manifests/main/docs/add-ons/storage/fsx-for-lustre/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsadd-onsstoragefsx-for-lustreguide"><span class="">FSx for Lustre</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsadd-onscloudwatchguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsadd-onscloudwatchguide-check"/>
  <label for="m-kubeflow-manifestsmaindocsadd-onscloudwatchguide-check"><a href="/kubeflow-manifests/main/docs/add-ons/cloudwatch/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsadd-onscloudwatchguide"><span class="">CloudWatch</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsadd-onsprometheusguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsadd-onsprometheusguide-check"/>
  <label for="m-kubeflow-manifestsmaindocsadd-onsprometheusguide-check"><a href="/kubeflow-manifests/main/docs/add-ons/prometheus/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsadd-onsprometheusguide"><span class="">Prometheus</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-kubeflow-manifestsmaindocscomponent-guides-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocscomponent-guides-check"/>
  <label for="m-kubeflow-manifestsmaindocscomponent-guides-check"><a href="/kubeflow-manifests/main/docs/component-guides/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsmaindocscomponent-guides"><span class="">Component Guides</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocscomponent-guidesnotebooks-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocscomponent-guidesnotebooks-check"/>
  <label for="m-kubeflow-manifestsmaindocscomponent-guidesnotebooks-check"><a href="/kubeflow-manifests/main/docs/component-guides/notebooks/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocscomponent-guidesnotebooks"><span class="">Notebooks</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocscomponent-guideskatib-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocscomponent-guideskatib-check"/>
  <label for="m-kubeflow-manifestsmaindocscomponent-guideskatib-check"><a href="/kubeflow-manifests/main/docs/component-guides/katib/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocscomponent-guideskatib"><span class="">Katib</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocscomponent-guidespipelines-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocscomponent-guidespipelines-check"/>
  <label for="m-kubeflow-manifestsmaindocscomponent-guidespipelines-check"><a href="/kubeflow-manifests/main/docs/component-guides/pipelines/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocscomponent-guidespipelines"><span class="">Pipelines</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocscomponent-guidestraining-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocscomponent-guidestraining-check"/>
  <label for="m-kubeflow-manifestsmaindocscomponent-guidestraining-check"><a href="/kubeflow-manifests/main/docs/component-guides/training/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocscomponent-guidestraining"><span class="">Training Operators</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-kubeflow-manifestsmaindocscomponent-guideskserve-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocscomponent-guideskserve-check"/>
  <label for="m-kubeflow-manifestsmaindocscomponent-guideskserve-check"><a href="/kubeflow-manifests/main/docs/component-guides/kserve/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsmaindocscomponent-guideskserve"><span class="">KServe</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocscomponent-guideskserveaccess-aws-services-from-kserve-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocscomponent-guideskserveaccess-aws-services-from-kserve-check"/>
  <label for="m-kubeflow-manifestsmaindocscomponent-guideskserveaccess-aws-services-from-kserve-check"><a href="/kubeflow-manifests/main/docs/component-guides/kserve/access-aws-services-from-kserve/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocscomponent-guideskserveaccess-aws-services-from-kserve"><span class="">Configure inferenceService to Access AWS Services from KServe</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocscomponent-guideskservetutorial-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocscomponent-guideskservetutorial-check"/>
  <label for="m-kubeflow-manifestsmaindocscomponent-guideskservetutorial-check"><a href="/kubeflow-manifests/main/docs/component-guides/kserve/tutorial/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocscomponent-guideskservetutorial"><span class="">KServe with Kubeflow on AWS</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocscomponent-guideskserveaws-deep-learning-containers-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocscomponent-guideskserveaws-deep-learning-containers-check"/>
  <label for="m-kubeflow-manifestsmaindocscomponent-guideskserveaws-deep-learning-containers-check"><a href="/kubeflow-manifests/main/docs/component-guides/kserve/aws-deep-learning-containers/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocscomponent-guideskserveaws-deep-learning-containers"><span class="">KServe with AWS Deep Learning Containers</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocscomponent-guidesprofiles-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocscomponent-guidesprofiles-check"/>
  <label for="m-kubeflow-manifestsmaindocscomponent-guidesprofiles-check"><a href="/kubeflow-manifests/main/docs/component-guides/profiles/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocscomponent-guidesprofiles"><span class="">Profiles</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-kubeflow-manifestsmaindocsamazon-sagemaker-integration-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsamazon-sagemaker-integration-check"/>
  <label for="m-kubeflow-manifestsmaindocsamazon-sagemaker-integration-check"><a href="/kubeflow-manifests/main/docs/amazon-sagemaker-integration/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsmaindocsamazon-sagemaker-integration"><span class="">Amazon SageMaker Integration</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsamazon-sagemaker-integrationsagemaker-operators-ack-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsamazon-sagemaker-integrationsagemaker-operators-ack-check"/>
  <label for="m-kubeflow-manifestsmaindocsamazon-sagemaker-integrationsagemaker-operators-ack-check"><a href="/kubeflow-manifests/main/docs/amazon-sagemaker-integration/sagemaker-operators-ack/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsamazon-sagemaker-integrationsagemaker-operators-ack"><span class="">SageMaker Operators for Kubernetes (ACK)</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocsamazon-sagemaker-integrationsagemaker-components-for-kubeflow-pipelines-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocsamazon-sagemaker-integrationsagemaker-components-for-kubeflow-pipelines-check"/>
  <label for="m-kubeflow-manifestsmaindocsamazon-sagemaker-integrationsagemaker-components-for-kubeflow-pipelines-check"><a href="/kubeflow-manifests/main/docs/amazon-sagemaker-integration/sagemaker-components-for-kubeflow-pipelines/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocsamazon-sagemaker-integrationsagemaker-components-for-kubeflow-pipelines"><span class="">SageMaker Components for Kubeflow Pipelines</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsmaindocstroubleshooting-aws-li">
  <input type="checkbox" id="m-kubeflow-manifestsmaindocstroubleshooting-aws-check"/>
  <label for="m-kubeflow-manifestsmaindocstroubleshooting-aws-check"><a href="/kubeflow-manifests/main/docs/troubleshooting-aws/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsmaindocstroubleshooting-aws"><span class="">Troubleshooting</span></a></label>
  
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href="https://github.com/awslabs/kubeflow-manifests//tree/main/website/content/en/docs/deployment/cognito/manifest/guide.md" class="td-page-meta--view" target="_blank" rel="noopener"><i class="fa fa-file-alt fa-fw"></i> View page source</a>
  <a href="https://github.com/awslabs/kubeflow-manifests//edit/main/website/content/en/docs/deployment/cognito/manifest/guide.md" class="td-page-meta--edit" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
  <a href="https://github.com/awslabs/kubeflow-manifests//new/main/website/content/en/docs/deployment/cognito/manifest/guide.md?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Create child page</a>
  <a href="https://github.com/awslabs/kubeflow-manifests//issues/new?title=Manual%20Deployment%20Guide" class="td-page-meta--issue" target="_blank" rel="noopener"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/awslabs/kubeflow-manifests/issues/new" class="td-page-meta--project-issue" target="_blank" rel="noopener"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>
  
</div>

            


<div class="td-toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#prerequisites">Prerequisites</a></li>
    <li><a href="#background">Background</a></li>
    <li><a href="#optional-automated-setup">(Optional) Automated setup</a></li>
    <li><a href="#10-create-a-custom-domain-and-certificates">1.0 Create a custom domain and certificates</a></li>
    <li><a href="#20-create-a-cognito-user-pool">2.0 Create a Cognito User Pool</a></li>
    <li><a href="#30-configure-ingress">3.0 Configure Ingress</a>
      <ul>
        <li><a href="#optional-configure-culling-for-notebooks">(Optional) Configure Culling for Notebooks</a></li>
      </ul>
    </li>
    <li><a href="#40-build-the-manifests-and-deploy-kubeflow">4.0 Build the manifests and deploy Kubeflow</a></li>
    <li><a href="#50-update-the-domain-with-the-alb-address">5.0 Update the domain with the ALB address</a></li>
    <li><a href="#60-connect-to-the-central-dashboard">6.0 Connect to the central dashboard</a></li>
    <li><a href="#70-uninstall-kubeflow">7.0 Uninstall Kubeflow</a></li>
  </ul>
</nav></div>



            

	
		



  
  

	
		



  
  

	

          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="https://awslabs.github.io/kubeflow-manifests/main/docs/">Documentation</a>
  </li>
  <li class="breadcrumb-item">
    <a href="https://awslabs.github.io/kubeflow-manifests/main/docs/deployment/">Deployment Options</a>
  </li>
  <li class="breadcrumb-item">
    <a href="https://awslabs.github.io/kubeflow-manifests/main/docs/deployment/cognito/">Cognito</a>
  </li>
  <li class="breadcrumb-item">
    <a href="https://awslabs.github.io/kubeflow-manifests/main/docs/deployment/cognito/manifest/">Manifest Deployment Guides</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">
    <a href="https://awslabs.github.io/kubeflow-manifests/main/docs/deployment/cognito/manifest/guide/">Manual Deployment Guide</a>
  </li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Manual Deployment Guide</h1>
	<div class="lead">Deploying Kubeflow with AWS Cognito as identity provider using Kustomize or Helm</div>
	<header class="article-meta">
		

  
    


  
    


  

		
	</header>    
	<blockquote>
<p>Note: Helm installation option is still in preview.</p>
</blockquote>
<p>This guide describes how to deploy Kubeflow on Amazon EKS using Cognito as your identity provider. Kubeflow uses Istio to manage internal traffic. In this guide, we will:</p>
<ul>
<li>create an Ingress to manage external traffic to the Kubernetes services</li>
<li>create an Application Load Balancer (ALB) to provide public DNS</li>
<li>enable TLS authentication for the Load Balancer</li>
<li>create a custom domain to host Kubeflow (because the certificates needed for TLS are not supported for ALB&rsquo;s public DNS names)</li>
</ul>
<h2 id="prerequisites">Prerequisites</h2>
<p>Check to make sure that you have the necessary <a href="https://awslabs.github.io/kubeflow-manifests/main/docs/deployment/prerequisites/">prerequisites</a>.</p>
<h2 id="background">Background</h2>
<p>Read the <a href="https://awslabs.github.io/kubeflow-manifests/main/docs/add-ons/load-balancer/guide/#background">background section</a> in the Load Balancer guide for information on the requirements for exposing Kubeflow over a Load Balancer.</p>
<p>Read the <a href="https://awslabs.github.io/kubeflow-manifests/main/docs/add-ons/load-balancer/guide/#create-domain-and-certificates">create domain and certificate section</a> for information on why we use a subdomain for hosting Kubeflow.</p>
<h2 id="optional-automated-setup">(Optional) Automated setup</h2>
<p>The rest of the sections in this guide walk you through each step for setting up domain, certificates, and a Cognito userpool using the AWS Console. This guide is intended for a new user to understand the design and details of these setup steps. If you prefer to use automated scripts and avoid human error for setting up the resources for deploying Kubeflow with Cognito, follow the <a href="https://awslabs.github.io/kubeflow-manifests/main/docs/deployment/cognito/manifest/guide-automated/">automated setup guide</a>.</p>
<h2 id="10-create-a-custom-domain-and-certificates">1.0 Create a custom domain and certificates</h2>
<ol>
<li>Follow the <a href="https://awslabs.github.io/kubeflow-manifests/main/docs/add-ons/load-balancer/guide/#create-a-subdomain">Create a subdomain</a> section of the Load Balancer guide to create a subdomain(e.g. <code>platform.example.com</code>) for hosting Kubeflow.</li>
<li>Follow the <a href="https://awslabs.github.io/kubeflow-manifests/main/docs/add-ons/load-balancer/guide/#create-certificates-for-domain">Create certificates for domain</a> section of the Load Balancer guide to create certificates required for TLS.</li>
</ol>
<p>From this point onwards, we will be creating/updating the DNS records <strong>in the subdomain only</strong>. All the screenshots of the hosted zone in the following sections/steps of this guide are for the subdomain.</p>
<h2 id="20-create-a-cognito-user-pool">2.0 Create a Cognito User Pool</h2>
<ol>
<li>
<p>Create a user pool in Cognito in the same region as your EKS cluster. Type a pool name and choose <code>Review defaults</code>.</p>
</li>
<li>
<p>The <strong>email</strong> is a required user attribute since Kubeflow uses email address as the user identifier for multi-user isolation. See <a href="https://www.kubeflow.org/docs/components/multi-tenancy/getting-started/#manual-profile-creation">Kubeflow documentation</a> for more information. On the review page, make sure <strong>email</strong> is selected as a required attribute. If it is not by default, edit the <code>Required attributes</code> and select <code>email</code>.</p>
<p><img src="https://raw.githubusercontent.com/awslabs/kubeflow-manifests/main/website/content/en/docs/images/cognito/cognito-email-required.png" alt="cognito-email-required"></p>
</li>
<li>
<p>On the Policies page, select <code>Only allow administrators to create users</code> under <code>Do you want to allow users to sign themselves up?</code> and save changes. This step is optional but is recommended to have strict control over the users.</p>
</li>
<li>
<p>Click on <code>Create pool</code> to create the user pool.</p>
</li>
<li>
<p>Add an <code>App client</code> with any name and the default options.</p>
<p><img src="https://raw.githubusercontent.com/awslabs/kubeflow-manifests/main/website/content/en/docs/images/cognito/cognito-app-client-id.png" alt="cognito-app-client-id"></p>
</li>
<li>
<p>In the <code>App client settings</code>, select <code>Authorization code grant</code> flow under OAuth-2.0 and check <code>email</code>, <code>openid</code>, <code>aws.cognito.signin.user.admin</code> and <code>profile</code> scopes.
Check also <code>Enabled Identity Providers</code>.</p>
<ul>
<li>
<p>Substitute <code>example.com</code> in this URL - <code>https://kubeflow.platform.example.com/oauth2/idpresponse</code> with your domain and use it as the Callback URL(s).</p>
</li>
<li>
<p>Substitute <code>example.com</code> in this URL - <code>https://kubeflow.platform.example.com</code> with your domain and use it as the Sign out URL(s).</p>
<p><img src="https://raw.githubusercontent.com/awslabs/kubeflow-manifests/main/website/content/en/docs/images/cognito/cognito-app-client-settings.png" alt="cognito-app-client-settings"></p>
</li>
</ul>
</li>
<li>
<p>Add a custom domain to the user pool. In order to add a custom domain to your user pool, you need to specify a domain name, and provide a certificate managed with AWS Certificate Manager (ACM).</p>
<ul>
<li>
<p>In order to use a custom domain, its root(i.e. <code>platform.example.com</code>) must have an valid A type record. Create a new record of type <code>A</code> in the <code>platform.example.com</code> hosted zone with an arbitrary IP for now. Once the ALB created, we will update this value.</p>
<p>Following is a screenshot of a <code>platform.example.com</code> hosted zone showing a record.</p>
<p><img src="https://raw.githubusercontent.com/awslabs/kubeflow-manifests/main/website/content/en/docs/images/cognito/subdomain-initial-A-record.png" alt="subdomain-initial-A-record"></p>
</li>
<li>
<p>If your cluster is not in N.Virginia (us-east-1), <a href="https://awslabs.github.io/kubeflow-manifests/main/docs/add-ons/load-balancer/guide/#create-certificates-for-domain">create an ACM certificate</a> in us-east-1 for <code>*.platform.example.com</code>. That is because <a href="https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-pools-add-custom-domain.html">Cognito requires</a> a certificate in N.Virginia in order to have a custom domain for a user pool.</p>
</li>
<li>
<p>In the <code>Domain name</code>:</p>
<ul>
<li>
<p>Choose <code>Use your domain</code>, type <code>auth.platform.example.com</code> and select the <code>*.platform.example.com</code> AWS managed certificate you’ve created in N.Virginia. Creating domain takes up to 15 mins.</p>
<p><img src="https://raw.githubusercontent.com/awslabs/kubeflow-manifests/main/website/content/en/docs/images/cognito/cognito-active-domain.png" alt="cognito-active-domain"></p>
</li>
<li>
<p>When it’s created, it will return the <code>Alias target</code> CloudFront address.</p>
<p><img src="https://raw.githubusercontent.com/awslabs/kubeflow-manifests/main/website/content/en/docs/images/cognito/cognito-domain-cloudfront-url.png" alt="cognito-domain-cloudfront-url"></p>
</li>
<li>
<p>Create a new record of type <code>A</code> for <code>auth.platform.example.com</code> with the value of the CloudFront URL.</p>
</li>
<li>
<p>Select the <code>alias</code> toggle and select <code>Alias to Cloudfront distribution</code> for creating the record:</p>
<p><img src="https://raw.githubusercontent.com/awslabs/kubeflow-manifests/main/website/content/en/docs/images/cognito/cognito-domain-cloudfront-A-record-creatin.png" alt="cognito-domain-cloudfront-A-record-creating"></p>
</li>
<li>
<p>Following is a screenshot of a A record for <code>auth.platform.example.com</code> in the <code>platform.example.com</code> hosted zone:</p>
<p><img src="https://raw.githubusercontent.com/awslabs/kubeflow-manifests/main/website/content/en/docs/images/cognito/cognito-domain-cloudfront-A-record-created.png" alt="cognito-domain-cloudfront-A-record-created"></p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="30-configure-ingress">3.0 Configure Ingress</h2>
<ol>
<li>
<p>Take note of the following values from the previous steps:</p>
<ul>
<li>
<p>The <strong>Pool ARN</strong> of the user pool found in Cognito general settings.</p>
</li>
<li>
<p>The <strong>App client id</strong>, found in Cognito App clients.</p>
</li>
<li>
<p>The <strong>Custom user pool domain</strong> (e.g. <code>auth.platform.example.com</code>), found in the Cognito domain name.</p>
</li>
<li>
<p>The <strong>ARN of the certificate</strong> from the Certificate Manager in the region where your platform (for the subdomain) is running.</p>
</li>
<li>
<p><strong>SignOutURL</strong> is the domain that you provided as the Sign out URL(s).</p>
</li>
<li>
<p><strong>CognitoLogoutURL</strong> is comprised of your CognitoUserPoolDomain, CognitoAppClientId, and the domain that you provided as the Sign out URL(s).</p>
</li>
<li>
<p>The <strong>load balancer scheme</strong> (e.g. <code>internet-facing</code> or <code>internal</code>). Default is set to <code>internet-facing</code>. Use <code>internal</code> as the load balancer scheme if you want the load balancer to be accessible only within your VPC. See <a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/userguide/how-elastic-load-balancing-works.html#load-balancer-scheme">Load balancer scheme</a> in the AWS documentation for more details.</p>
</li>
</ul>
</li>
<li>
<p>Export those values:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">CognitoUserPoolArn</span><span class="o">=</span><span class="s2">&#34;&lt;YOUR_USER_POOL_ARN&gt;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">CognitoAppClientId</span><span class="o">=</span><span class="s2">&#34;&lt;YOUR_APP_CLIENT_ID&gt;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">CognitoUserPoolDomain</span><span class="o">=</span><span class="s2">&#34;&lt;YOUR_USER_POOL_DOMAIN&gt;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">certArn</span><span class="o">=</span><span class="s2">&#34;&lt;YOUR_ACM_CERTIFICATE_ARN&gt;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">signOutURL</span><span class="o">=</span><span class="s2">&#34;&lt;YOUR_SIGN_OUT_URL&gt;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">CognitoLogoutURL</span><span class="o">=</span><span class="s2">&#34;https://</span><span class="nv">$CognitoUserPoolDomain</span><span class="s2">/logout?client_id=</span><span class="nv">$CognitoAppClientId</span><span class="s2">&amp;logout_uri=</span><span class="nv">$signOutURL</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">loadBalancerScheme</span><span class="o">=</span>internet-facing
</span></span></code></pre></div></li>
<li>
<p>The following commands will inject those values in a configuration file for setting up Ingress:</p>
<p>Select the package manager of your choice.

    
















    
















    <ul class="nav nav-tabs" id="tabs-7" role="tablist"><li class="nav-item">
      <a class="nav-link active tab-Kustomize"
        id="tabs-7-0-tab" data-toggle="tab" href="#tabs-7-0" role="tab" onclick="handleClick(&#34;Kustomize&#34;);"
        aria-controls="tabs-7-0" aria-selected="true">
        Kustomize
      </a>
    </li><li class="nav-item">
      <a class="nav-link tab-Helm"
        id="tabs-7-1-tab" data-toggle="tab" href="#tabs-7-1" role="tab" onclick="handleClick(&#34;Helm&#34;);"
        aria-controls="tabs-7-1" aria-selected="false">
        Helm
      </a>
    </li></ul>


<div class="tab-content" id="tabs-7-content"><div class="tab-pane fade show active"
        id="tabs-7-0" role="tabpanel" aria-labelled-by="tabs-7-0-tab"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-toml" data-lang="toml"><span class="line"><span class="cl"><span class="nx">printf</span> <span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">CognitoUserPoolArn=&#39;</span><span class="err">$</span><span class="nx">CognitoUserPoolArn</span><span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">CognitoAppClientId=&#39;</span><span class="err">$</span><span class="nx">CognitoAppClientId</span><span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">CognitoUserPoolDomain=&#39;</span><span class="err">$</span><span class="nx">CognitoUserPoolDomain</span><span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">certArn=&#39;</span><span class="err">$</span><span class="nx">certArn</span><span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;</span> <span class="err">&gt;</span> <span class="nx">awsconfigs</span><span class="err">/</span><span class="nx">common</span><span class="err">/</span><span class="nx">istio-ingress</span><span class="err">/</span><span class="nx">overlays</span><span class="err">/</span><span class="nx">cognito</span><span class="err">/</span><span class="nx">params</span><span class="p">.</span><span class="nx">env</span>
</span></span><span class="line"><span class="cl"><span class="nx">printf</span> <span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">loadBalancerScheme=&#39;</span><span class="err">$</span><span class="nx">loadBalancerScheme</span><span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;</span> <span class="err">&gt;</span> <span class="nx">awsconfigs</span><span class="err">/</span><span class="nx">common</span><span class="err">/</span><span class="nx">istio-ingress</span><span class="err">/</span><span class="nx">base</span><span class="err">/</span><span class="nx">params</span><span class="p">.</span><span class="nx">env</span>
</span></span><span class="line"><span class="cl">    </span></span></code></pre></div></div>
  <div class="tab-pane fade"
        id="tabs-7-1" role="tabpanel" aria-labelled-by="tabs-7-1-tab"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="l">yq e &#39;.alb.certArn = env(certArn)&#39; -i charts/common/ingress/cognito/values.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">yq e &#39;.alb.cognito.UserPoolArn = env(CognitoUserPoolArn)&#39; -i charts/common/ingress/cognito/values.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">yq e &#39;.alb.cognito.UserPoolDomain = env(CognitoUserPoolDomain)&#39; -i charts/common/ingress/cognito/values.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">yq e &#39;.alb.cognito.appClientId = env(CognitoAppClientId)&#39; -i charts/common/ingress/cognito/values.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">yq e &#39;.alb.scheme = env(loadBalancerScheme)&#39; -i charts/common/ingress/cognito/values.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span></span></span></code></pre></div></div>
  
</div>
</p>
</li>
<li>
<p>The following commands will inject those values in a configuration file for setting up AWS authservice:</p>
<p>Select the package manager of your choice.

    
















    
















    <ul class="nav nav-tabs" id="tabs-8" role="tablist"><li class="nav-item">
      <a class="nav-link active tab-Kustomize"
        id="tabs-8-0-tab" data-toggle="tab" href="#tabs-8-0" role="tab" onclick="handleClick(&#34;Kustomize&#34;);"
        aria-controls="tabs-8-0" aria-selected="true">
        Kustomize
      </a>
    </li><li class="nav-item">
      <a class="nav-link tab-Helm"
        id="tabs-8-1-tab" data-toggle="tab" href="#tabs-8-1" role="tab" onclick="handleClick(&#34;Helm&#34;);"
        aria-controls="tabs-8-1" aria-selected="false">
        Helm
      </a>
    </li></ul>


<div class="tab-content" id="tabs-8-content"><div class="tab-pane fade show active"
        id="tabs-8-0" role="tabpanel" aria-labelled-by="tabs-8-0-tab"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-toml" data-lang="toml"><span class="line"><span class="cl"><span class="nx">printf</span> <span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">LOGOUT_URL=&#39;</span><span class="err">$</span><span class="nx">CognitoLogoutURL</span><span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;</span> <span class="err">&gt;</span> <span class="nx">awsconfigs</span><span class="err">/</span><span class="nx">common</span><span class="err">/</span><span class="nx">aws-authservice</span><span class="err">/</span><span class="nx">base</span><span class="err">/</span><span class="nx">params</span><span class="p">.</span><span class="nx">env</span>
</span></span><span class="line"><span class="cl">    </span></span></code></pre></div></div>
  <div class="tab-pane fade"
        id="tabs-8-1" role="tabpanel" aria-labelled-by="tabs-8-1-tab"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="l">yq e &#39;.LOGOUT_URL = env(CognitoLogoutURL)&#39; -i charts/common/aws-authservice/values.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span></span></span></code></pre></div></div>
  
</div>
</p>
</li>
<li>
<p>Follow the <a href="https://awslabs.github.io/kubeflow-manifests/main/docs/add-ons/load-balancer/guide/#configure-load-balancer-controller">Configure Load Balancer Controller</a> section of the load balancer guide to setup the resources required by the load balancer controller.</p>
</li>
</ol>
<h3 id="optional-configure-culling-for-notebooks">(Optional) Configure Culling for Notebooks</h3>
<p>Enable culling for notebooks by following the <a href="https://awslabs.github.io/kubeflow-manifests/main/docs/deployment/configure-notebook-culling/">instructions</a> in configure culling for notebooks guide.</p>
<h2 id="40-build-the-manifests-and-deploy-kubeflow">4.0 Build the manifests and deploy Kubeflow</h2>



































<ul class="nav nav-tabs" id="tabs-11" role="tablist"><li class="nav-item">
      <a class="nav-link active tab-Kustomize"
        id="tabs-11-0-tab" data-toggle="tab" href="#tabs-11-0" role="tab" onclick="handleClick(&#34;Kustomize&#34;);"
        aria-controls="tabs-11-0" aria-selected="true">
        Kustomize
      </a>
    </li><li class="nav-item">
      <a class="nav-link tab-Helm"
        id="tabs-11-1-tab" data-toggle="tab" href="#tabs-11-1" role="tab" onclick="handleClick(&#34;Helm&#34;);"
        aria-controls="tabs-11-1" aria-selected="false">
        Helm
      </a>
    </li></ul>


<div class="tab-content" id="tabs-11-content"><div class="tab-pane fade show active"
        id="tabs-11-0" role="tabpanel" aria-labelled-by="tabs-11-0-tab"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-toml" data-lang="toml"><span class="line"><span class="cl"><span class="nx">make</span> <span class="nx">deploy-kubeflow</span> <span class="nx">INSTALLATION_OPTION</span><span class="p">=</span><span class="nx">kustomize</span> <span class="nx">DEPLOYMENT_OPTION</span><span class="p">=</span><span class="nx">cognito</span></span></span></code></pre></div></div>
  <div class="tab-pane fade"
        id="tabs-11-1" role="tabpanel" aria-labelled-by="tabs-11-1-tab"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="l">make deploy-kubeflow INSTALLATION_OPTION=helm DEPLOYMENT_OPTION=cognito</span></span></span></code></pre></div></div>
  
</div>

<h2 id="50-update-the-domain-with-the-alb-address">5.0 Update the domain with the ALB address</h2>
<ol>
<li>
<p>Check if the ALB is provisioned. This may take a few minutes.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl get ingress -n istio-system
</span></span><span class="line"><span class="cl">Warning: extensions/v1beta1 Ingress is deprecated in v1.14+, unavailable in v1.22+<span class="p">;</span> use networking.k8s.io/v1 Ingress
</span></span><span class="line"><span class="cl">NAME            CLASS    HOSTS   ADDRESS                                                              PORTS   AGE
</span></span><span class="line"><span class="cl">istio-ingress   &lt;none&gt;   *       k8s-istiosys-istioing-xxxxxx-110050202.us-west-2.elb.amazonaws.com   <span class="m">80</span>      15d
</span></span></code></pre></div><p>If <code>ADDRESS</code> is empty after a few minutes, see <a href="https://awslabs.github.io/kubeflow-manifests/main/docs/troubleshooting-aws/#alb-fails-to-provision">ALB fails to provision</a> in the troubleshooting guide.</p>
</li>
<li>
<p>When the ALB is ready, copy the DNS name of the load balancer and create a CNAME entry for it in Route53 under the subdomain (<code>platform.example.com</code>) for <code>*.platform.example.com</code></p>
<p><img src="https://raw.githubusercontent.com/awslabs/kubeflow-manifests/main/website/content/en/docs/images/cognito/subdomain-*.platform-and-*.default-records.png" alt="subdomain-.platform-and-.default-records"></p>
</li>
<li>
<p>Update the type <code>A</code> record created for <code>platform.example.com</code> using ALB DNS name. Change from <code>127.0.0.1</code> to the ALB DNS name. You have to use the alias form under <code>Alias to application and classical load balancer</code> then select a region and your ALB address.</p>
<p><img src="https://raw.githubusercontent.com/awslabs/kubeflow-manifests/main/website/content/en/docs/images/cognito/subdomain-A-record-updated.png" alt="subdomain-A-record-updated"></p>
</li>
<li>
<p>Here is a screenshot of all the record sets in the hosted zone for reference.</p>
<p><img src="https://raw.githubusercontent.com/awslabs/kubeflow-manifests/main/website/content/en/docs/images/cognito/subdomain-records-summary.png" alt="subdomain-records-summary"></p>
</li>
</ol>
<h2 id="60-connect-to-the-central-dashboard">6.0 Connect to the central dashboard</h2>
<ol>
<li>
<p>The central dashboard should now be available at <code>https://kubeflow.platform.example.com</code>.</p>
<p>Before connecting to the dashboard:</p>
<ul>
<li>
<p>Go to the Cognito console and create some users in <code>Users and groups</code>. These are the users who will log in to the central dashboard.
<img src="https://raw.githubusercontent.com/awslabs/kubeflow-manifests/main/website/content/en/docs/images/cognito/cognito-user-pool-created.png" alt="cognito-user-pool-created"></p>
</li>
<li>
<p>Create a Profile for a user by following the steps in the <a href="https://www.kubeflow.org/docs/components/multi-tenancy/getting-started/#manual-profile-creation">Manual Profile Creation</a>.
The following is a Profile example for reference:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">apiVersion: kubeflow.org/v1beta1
</span></span><span class="line"><span class="cl">kind: Profile
</span></span><span class="line"><span class="cl">metadata:
</span></span><span class="line"><span class="cl">   <span class="c1"># replace with the name of profile you want, this will be user&#39;s namespace name</span>
</span></span><span class="line"><span class="cl">   name: namespace-for-my-user
</span></span><span class="line"><span class="cl">   namespace: kubeflow
</span></span><span class="line"><span class="cl">spec:
</span></span><span class="line"><span class="cl">   owner:
</span></span><span class="line"><span class="cl">       kind: User
</span></span><span class="line"><span class="cl">       <span class="c1"># replace with the email of the user</span>
</span></span><span class="line"><span class="cl">       name: my_user_email@kubeflow.com
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p>Open the central dashboard at <code>https://kubeflow.platform.example.com</code>.
It will redirect to Cognito for login. Use the credentials of a user you just created in the previous steps.</p>
</li>
</ol>
<blockquote>
<p>Note: It might take a few minutes for the DNS changes to propagate and for your URL to work.
Check if the DNS entry propogated with the <a href="https://toolbox.googleapps.com/apps/dig/#CNAME/">Google Admin Toolbox</a>.</p>
</blockquote>
<h2 id="70-uninstall-kubeflow">7.0 Uninstall Kubeflow</h2>
<p>To delete the resources created in this guide, refer to the <a href="https://awslabs.github.io/kubeflow-manifests/main/docs/deployment/cognito/manifest/guide-automated/#50-uninstall-kubeflow">Uninstall section in Automated Cognito deployment guide</a>.</p>

	
	
	<div class="text-muted mt-5 pt-3 border-top">
  Last modified March 20, 2023: <a href="https://github.com/awslabs/kubeflow-manifests//commit/8ea80a43f0e1868260b2c004595152a0f78f0799">Update Kustomize version to 5.0.1 (#627) (8ea80a4)</a>
</div>

</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark pt-3 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
      </div>
      <div class="col text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2023 The Kubeflow on AWS Authors.</small>
        
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
    integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA=="
    crossorigin="anonymous"></script>





<script src='/kubeflow-manifests/main/js/tabpane-persist.js'></script>


















<script src="/kubeflow-manifests/main/js/main.min.8d2e82c30fec078acdff660ba1f09fd27f71eeb319768de1f94871127cac62bd.js" integrity="sha256-jS6Cww/sB4rN/2YLofCf0n9x7rMZdo3h&#43;UhxEnysYr0=" crossorigin="anonymous"></script>




<script src="/kubeflow-manifests/main/js/copy-code-button.min.js"></script>


<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>

<script type="text/javascript">

docsearch({

appId: 'A1FXAERJE4',

apiKey: '88f3a753878f24ffdcd3d786be775545',

indexName: 'kubeflow-manifests',

container: '#docsearch',

searchParameters: {
    facetFilters: ["version: main "],
  },
debug: true 

});
</script>



  </body>
</html>