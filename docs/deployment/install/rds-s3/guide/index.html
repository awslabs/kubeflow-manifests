<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.93.0" />
<meta name="robots" content="index, follow">

<script type="application/ld+json">
  {
      "@context" : "http://schema.org",
      "@type" : "WebSite",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "https:\/\/awslabs.github.io\/kubeflow-manifests\/"
      },
      "articleSection" : "docs",
      "name" : "RDS and S3",
      "headline" : "RDS and S3",
      "description" : "Kustomize Manifests for RDS and S3",
      "inLanguage" : "en-US",
      "author" : "",
      "creator" : "",
      "publisher": "",
      "accountablePerson" : "",
      "copyrightHolder" : "",
      "copyrightYear" : "0001",
      "datePublished": "0001-01-01 00:00:00 \u002b0000 UTC",
      "dateModified" : "0001-01-01 00:00:00 \u002b0000 UTC",
      "url" : "https:\/\/awslabs.github.io\/kubeflow-manifests\/docs\/deployment\/install\/rds-s3\/guide\/",
      "wordCount" : "2279",
      "keywords" : [ "Kubeflow" ]
  }
  </script>

<link rel="shortcut icon" href="/kubeflow-manifests/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/kubeflow-manifests/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/kubeflow-manifests/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/kubeflow-manifests/favicons/favicon-32x32.png" sizes="32x32">
<link rel="manifest" href="/kubeflow-manifests/favicons/manifest.json">
<meta name="msapplication-config" content="/kubeflow-manifests/favicons/browserconfig.xml" />
<meta name="msapplication-TileColor" content="#4279f4">
<meta name="theme-color" content="#4279f4">

<title>RDS and S3 | Kubeflow on AWS</title>
<meta name="description" content="Kustomize Manifests for RDS and S3">
<meta property="og:title" content="RDS and S3" />
<meta property="og:description" content="Kustomize Manifests for RDS and S3" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://awslabs.github.io/kubeflow-manifests/docs/deployment/install/rds-s3/guide/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2022-04-19T20:20:32-07:00" /><meta property="og:site_name" content="Kubeflow on AWS" />

<meta itemprop="name" content="RDS and S3">
<meta itemprop="description" content="Kustomize Manifests for RDS and S3">
<meta itemprop="dateModified" content="2022-04-19T20:20:32-07:00" />
<meta itemprop="wordCount" content="2279">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="RDS and S3"/>
<meta name="twitter:description" content="Kustomize Manifests for RDS and S3"/>




<link rel="preload" href="/kubeflow-manifests/scss/main.min.b275c0f5fd67c46ede305b867783e2f2c77df1c8e5b6fa9630975c6588ebfe2b.css" as="style">
<link href="/kubeflow-manifests/scss/main.min.b275c0f5fd67c46ede305b867783e2f2c77df1c8e5b6fa9630975c6588ebfe2b.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-135379910-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand-md navbar-dark  td-navbar">
        <a class="navbar-brand" href="/kubeflow-manifests/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">Kubeflow on AWS</span>
	</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main_navbar" aria-controls="main_navbar" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse ml-md-auto" id="main_navbar">
		<ul class="navbar-nav ml-auto pt-4 pt-md-0 my-2 my-md-1">
			
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/kubeflow-manifests/docs/" ><i class='fas fa-book pr-2'></i><span>Documentation</span></a>
			</li>
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://github.com/awslabs/kubeflow-manifests" target="_blank" ><i class='fab fa-github pr-2'></i><span>GitHub</span></a>
			</li>
			
			
			<li class="nav-item dropdown mt-1 mt-lg-0 mr-2">
				<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Releases
</a>
<div class="dropdown-menu dropdown-menu-md-right dropdown-menu-lg-left" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="https://awslabs.github.io/kubeflow-manifests/docs">1.4</a>
	
</div>

			</li>
			
			
		</ul>
	</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <input type="search" class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete="off">

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="collapse td-sidebar-nav foldable-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-kubeflow-manifestsdocs-li">
  <a href="/kubeflow-manifests/docs/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-kubeflow-manifestsdocs"><span class="">Documentation</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-kubeflow-manifestsdocsabout-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsabout-check"/>
  <label for="m-kubeflow-manifestsdocsabout-check"><a href="/kubeflow-manifests/docs/about/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsdocsabout"><span class="">About</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocsaboutfeatures-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsaboutfeatures-check"/>
  <label for="m-kubeflow-manifestsdocsaboutfeatures-check"><a href="/kubeflow-manifests/docs/about/features/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocsaboutfeatures"><span class="">AWS Features for Kubeflow</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocsaboutreleases-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsaboutreleases-check"/>
  <label for="m-kubeflow-manifestsdocsaboutreleases-check"><a href="/kubeflow-manifests/docs/about/releases/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocsaboutreleases"><span class="">Releases and Versioning</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocsabouteks-compatibility-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsabouteks-compatibility-check"/>
  <label for="m-kubeflow-manifestsdocsabouteks-compatibility-check"><a href="/kubeflow-manifests/docs/about/eks-compatibility/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocsabouteks-compatibility"><span class="">Amazon EKS and Kubeflow Compatibility</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocsaboutsecurity-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsaboutsecurity-check"/>
  <label for="m-kubeflow-manifestsdocsaboutsecurity-check"><a href="/kubeflow-manifests/docs/about/security/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocsaboutsecurity"><span class="">Security</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocsaboutusage-tracking-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsaboutusage-tracking-check"/>
  <label for="m-kubeflow-manifestsdocsaboutusage-tracking-check"><a href="/kubeflow-manifests/docs/about/usage-tracking/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocsaboutusage-tracking"><span class="">Usage Tracking</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-kubeflow-manifestsdocsdeployment-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsdeployment-check" checked/>
  <label for="m-kubeflow-manifestsdocsdeployment-check"><a href="/kubeflow-manifests/docs/deployment/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsdocsdeployment"><span class="">Deployment</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-kubeflow-manifestsdocsdeploymentinstall-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsdeploymentinstall-check" checked/>
  <label for="m-kubeflow-manifestsdocsdeploymentinstall-check"><a href="/kubeflow-manifests/docs/deployment/install/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsdocsdeploymentinstall"><span class="">Install Kubeflow</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocsdeploymentinstallprerequisites-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsdeploymentinstallprerequisites-check"/>
  <label for="m-kubeflow-manifestsdocsdeploymentinstallprerequisites-check"><a href="/kubeflow-manifests/docs/deployment/install/prerequisites/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocsdeploymentinstallprerequisites"><span class="">Prerequisites</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocsdeploymentinstallcognitoguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsdeploymentinstallcognitoguide-check"/>
  <label for="m-kubeflow-manifestsdocsdeploymentinstallcognitoguide-check"><a href="/kubeflow-manifests/docs/deployment/install/cognito/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocsdeploymentinstallcognitoguide"><span class="">Cognito</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-kubeflow-manifestsdocsdeploymentinstallrds-s3guide-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsdeploymentinstallrds-s3guide-check" checked/>
  <label for="m-kubeflow-manifestsdocsdeploymentinstallrds-s3guide-check"><a href="/kubeflow-manifests/docs/deployment/install/rds-s3/guide/" class="align-left pl-0  active td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocsdeploymentinstallrds-s3guide"><span class="td-sidebar-nav-active-item">RDS and S3</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocsdeploymentinstallcognito-rds-s3guide-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsdeploymentinstallcognito-rds-s3guide-check"/>
  <label for="m-kubeflow-manifestsdocsdeploymentinstallcognito-rds-s3guide-check"><a href="/kubeflow-manifests/docs/deployment/install/cognito-rds-s3/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocsdeploymentinstallcognito-rds-s3guide"><span class="">Cognito, RDS, and S3</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocsdeploymentinstallvanillaguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsdeploymentinstallvanillaguide-check"/>
  <label for="m-kubeflow-manifestsdocsdeploymentinstallvanillaguide-check"><a href="/kubeflow-manifests/docs/deployment/install/vanilla/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocsdeploymentinstallvanillaguide"><span class="">Vanilla Installation</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-kubeflow-manifestsdocsdeploymentinstalladd-ons-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsdeploymentinstalladd-ons-check"/>
  <label for="m-kubeflow-manifestsdocsdeploymentinstalladd-ons-check"><a href="/kubeflow-manifests/docs/deployment/install/add-ons/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsdocsdeploymentinstalladd-ons"><span class="">Add-ons</span></a></label>
  
  <ul class="ul-4 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocsdeploymentinstalladd-onsstorageefsguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsdeploymentinstalladd-onsstorageefsguide-check"/>
  <label for="m-kubeflow-manifestsdocsdeploymentinstalladd-onsstorageefsguide-check"><a href="/kubeflow-manifests/docs/deployment/install/add-ons/storage/efs/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocsdeploymentinstalladd-onsstorageefsguide"><span class="">EFS</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocsdeploymentinstalladd-onsstoragefsx-for-lustreguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsdeploymentinstalladd-onsstoragefsx-for-lustreguide-check"/>
  <label for="m-kubeflow-manifestsdocsdeploymentinstalladd-onsstoragefsx-for-lustreguide-check"><a href="/kubeflow-manifests/docs/deployment/install/add-ons/storage/fsx-for-lustre/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocsdeploymentinstalladd-onsstoragefsx-for-lustreguide"><span class="">FSx for Lustre</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocsdeploymentinstalladd-onscloudwatchguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsdeploymentinstalladd-onscloudwatchguide-check"/>
  <label for="m-kubeflow-manifestsdocsdeploymentinstalladd-onscloudwatchguide-check"><a href="/kubeflow-manifests/docs/deployment/install/add-ons/cloudwatch/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocsdeploymentinstalladd-onscloudwatchguide"><span class="">CloudWatch</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocsdeploymentinstalladd-onsload-balancerguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsdeploymentinstalladd-onsload-balancerguide-check"/>
  <label for="m-kubeflow-manifestsdocsdeploymentinstalladd-onsload-balancerguide-check"><a href="/kubeflow-manifests/docs/deployment/install/add-ons/load-balancer/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocsdeploymentinstalladd-onsload-balancerguide"><span class="">Load Balancer</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocsdeploymentinstallcognitoreadme-automated-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsdeploymentinstallcognitoreadme-automated-check"/>
  <label for="m-kubeflow-manifestsdocsdeploymentinstallcognitoreadme-automated-check"><a href="/kubeflow-manifests/docs/deployment/install/cognito/readme-automated/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocsdeploymentinstallcognitoreadme-automated"><span class=""></span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocsdeploymentuninstall-kubeflow-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocsdeploymentuninstall-kubeflow-check"/>
  <label for="m-kubeflow-manifestsdocsdeploymentuninstall-kubeflow-check"><a href="/kubeflow-manifests/docs/deployment/uninstall-kubeflow/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocsdeploymentuninstall-kubeflow"><span class="">Uninstall Kubeflow</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-kubeflow-manifestsdocscomponent-guides-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocscomponent-guides-check"/>
  <label for="m-kubeflow-manifestsdocscomponent-guides-check"><a href="/kubeflow-manifests/docs/component-guides/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsdocscomponent-guides"><span class="">Component Guides</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocscomponent-guidesnotebooks-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocscomponent-guidesnotebooks-check"/>
  <label for="m-kubeflow-manifestsdocscomponent-guidesnotebooks-check"><a href="/kubeflow-manifests/docs/component-guides/notebooks/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocscomponent-guidesnotebooks"><span class="">Notebooks</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocscomponent-guidespipelines-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocscomponent-guidespipelines-check"/>
  <label for="m-kubeflow-manifestsdocscomponent-guidespipelines-check"><a href="/kubeflow-manifests/docs/component-guides/pipelines/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocscomponent-guidespipelines"><span class="">Pipelines</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocscomponent-guideskserve-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocscomponent-guideskserve-check"/>
  <label for="m-kubeflow-manifestsdocscomponent-guideskserve-check"><a href="/kubeflow-manifests/docs/component-guides/kserve/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocscomponent-guideskserve"><span class="">KServe</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocscomponent-guidesprofiles-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocscomponent-guidesprofiles-check"/>
  <label for="m-kubeflow-manifestsdocscomponent-guidesprofiles-check"><a href="/kubeflow-manifests/docs/component-guides/profiles/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocscomponent-guidesprofiles"><span class="">Profiles</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsdocstroubleshooting-aws-li">
  <input type="checkbox" id="m-kubeflow-manifestsdocstroubleshooting-aws-check"/>
  <label for="m-kubeflow-manifestsdocstroubleshooting-aws-check"><a href="/kubeflow-manifests/docs/troubleshooting-aws/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsdocstroubleshooting-aws"><span class="">Troubleshooting</span></a></label>
  
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href="https://github.com/awslabs/kubeflow-manifests/docs/tree/master/content/en/docs/deployment/install/rds-s3/guide.md" class="td-page-meta--view" target="_blank" rel="noopener"><i class="fa fa-file-alt fa-fw"></i> View page source</a>
  <a href="https://github.com/awslabs/kubeflow-manifests/docs/edit/master/content/en/docs/deployment/install/rds-s3/guide.md" class="td-page-meta--edit" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
  <a href="https://github.com/awslabs/kubeflow-manifests/docs/new/master/content/en/docs/deployment/install/rds-s3/guide.md?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Create child page</a>
  <a href="https://github.com/awslabs/kubeflow-manifests/docs/issues/new?title=RDS%20and%20S3" class="td-page-meta--issue" target="_blank" rel="noopener"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/awslabs/kubeflow-manifests/issues/new" class="td-page-meta--project-issue" target="_blank" rel="noopener"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>
  
</div>

            


<div class="td-toc"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#rds">RDS</a></li>
        <li><a href="#s3">S3</a></li>
      </ul>
    </li>
    <li><a href="#install">Install</a>
      <ul>
        <li><a href="#using-only-rds-or-only-s3">Using only RDS or only S3</a></li>
      </ul>
    </li>
    <li><a href="#10-prerequisites">1.0 Prerequisites</a></li>
    <li><a href="#20-setup-rds-s3-and-configure-secrets">2.0 Setup RDS, S3 and configure Secrets</a>
      <ul>
        <li><a href="#21-option-1-automated-setup">2.1 <strong>Option 1: Automated Setup</strong></a></li>
        <li><a href="#advanced-customization">Advanced customization</a></li>
        <li><a href="#22-option-2-manual-setup">2.2 <strong>Option 2: Manual Setup</strong></a></li>
      </ul>
    </li>
    <li><a href="#30-build-manifests-and-install-kubeflow">3.0 Build Manifests and Install Kubeflow</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#40-verify-the-installation">4.0 Verify the installation</a>
      <ul>
        <li><a href="#41-verify-rds">4.1 Verify RDS</a></li>
        <li><a href="#42-verify-s3">4.2 Verify S3</a></li>
      </ul>
    </li>
    <li><a href="#50-uninstall-kubeflow">5.0 Uninstall Kubeflow</a></li>
  </ul>
</nav></div>



            

	
		



  
  

	
		



  
  

	

          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="https://awslabs.github.io/kubeflow-manifests/docs/">Documentation</a>
  </li>
  <li class="breadcrumb-item">
    <a href="https://awslabs.github.io/kubeflow-manifests/docs/deployment/">Deployment</a>
  </li>
  <li class="breadcrumb-item">
    <a href="https://awslabs.github.io/kubeflow-manifests/docs/deployment/install/">Install Kubeflow</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">
    <a href="https://awslabs.github.io/kubeflow-manifests/docs/deployment/install/rds-s3/guide/">RDS and S3</a>
  </li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>RDS and S3</h1>
	<div class="lead">Kustomize Manifests for RDS and S3</div>
	<header class="article-meta">
		

  
    


  
    


  

		
	</header>    
	<p>This Kustomize Manifest can be used to deploy Kubeflow Pipelines (KFP) and Katib with RDS and S3.</p>
<h3 id="rds">RDS</h3>
<p><a href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Welcome.html">Amazon Relational Database Service (RDS)</a> is a managed relational database service that facilitates several database management tasks such as database scaling, database backups, database software patching, OS patching, and more.</p>
<p>In the <a href="../../../docs/deployment/vanilla/kustomization.yaml">default kubeflow installation</a>, the <a href="https://github.com/kubeflow/manifests/blob/v1.4-branch/apps/katib/upstream/components/mysql/mysql.yaml">KFP</a> and <a href="https://github.com/kubeflow/manifests/blob/v1.4-branch/apps/pipeline/upstream/third-party/mysql/base/mysql-deployment.yaml">Katib</a> components both use their own MySQL pod to persist KFP data (such as experiments, pipelines, jobs, etc.) and Katib experiment observation logs, respectively.</p>
<p>As compared to using the MySQL setup in the default installation, using RDS provides the following advantages:</p>
<ul>
<li>Easier to configure availability: RDS provides high availability and failover support for DB instances using Multi Availability Zone (Mulit-AZ) deployments with a single standby DB instance, increasing the availability of KFP and Katib services during unexpected network events</li>
<li>Easy to configure scalability: While the default Kubeflow installation uses a EBS hosted Peristent Volume Claim that is AZ bound and does not support automatic online resizing, RDS can be configured to handle availability and scaling needs</li>
<li>KFP and Katib data can be persisted beyond single Kubeflow installations: Using RDS decouples the KFP and Katib datastores from the Kubeflow deployment, allowing multiple Kubeflow installations to reuse the same RDS instance provided that the KFP component versions stores data in a format that is compatible with each other.</li>
<li>Higher level of customizability and management: RDS provides management features to facilitate changing database instance types, updating SQL versions, and more.</li>
</ul>
<h3 id="s3">S3</h3>
<p><a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/Welcome.html">Amazon Simple Storage Service (S3)</a> is an object storage service that is highly scalable, available, secure, and performant.</p>
<p>In the <a href="../../../docs/deployment/vanilla/kustomization.yaml">default kubeflow installation</a>, the <a href="https://github.com/kubeflow/manifests/blob/v1.4-branch/apps/pipeline/upstream/third-party/minio/base/minio-deployment.yaml">KFP</a> component uses the MinIO object storage service that can be configured to store objects in S3. However, by default the installation hosts the object store service locally in the cluster. KFP stores data such as pipeline architectures and pipeline run artifacts in MinIO.</p>
<p>Configuring MinIO to read and write to S3 provides the following advantages:</p>
<ul>
<li>Higher scalability and availability: S3 offers industry-leading scalability and availability and is more durable than the default MinIO object storage solution provided by Kubeflow.</li>
<li>KFP artifacts can be persisted beyond single Kubeflow installations: Using S3 decouples the KFP artifact store from the Kubeflow deployment, allowing multiple Kubeflow installations to access the same artifacts provided that the KFP component versions stores data in a format that is compatible with each other.</li>
<li>Higher level of customizability and management: S3 provides management features to help optimize, organize, and configure access to your data to meet your specific business, organizational, and compliance requirements</li>
</ul>
<p>To get started with configuring and installing your Kubeflow installation with RDS and S3 follow the <a href="#install">install</a> steps below to configure and deploy the Kustomize manifest.</p>
<h2 id="install">Install</h2>
<p>The following steps show how to configure and deploy Kubeflow with supported AWS services.</p>
<h3 id="using-only-rds-or-only-s3">Using only RDS or only S3</h3>
<p>Steps relevant only to the RDS installation will be prefixed with <code>[RDS]</code>.</p>
<p>Steps relevant only to the S3 installation will be prefixed with <code>[S3]</code>.</p>
<p>Steps without any prefixing are necessary for all installations.</p>
<p>To install for either only RDS or S3 complete the steps relevant to your installation choice.</p>
<p>To install for both RDS and S3 complete all the below steps.</p>
<h2 id="10-prerequisites">1.0 Prerequisites</h2>
<p>Follow the pre-requisites section from <a href="../prerequisites.md">this guide</a></p>
<ol>
<li>Verify that your are in the root of this repository by running the pwd command. The path should be &lt;PATH/kubeflow-manifests&gt;</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>pwd 
</span></span></code></pre></div><ol start="4">
<li>Create an OIDC provider for your cluster<br>
<strong>Important :</strong><br>
You must make sure you have an <a href="https://docs.aws.amazon.com/eks/latest/userguide/enable-iam-roles-for-service-accounts.html">OIDC provider</a> for your cluster and that it was added from <code>eksctl</code> &gt;= <code>0.56</code> or if you already have an OIDC provider in place, then you must make sure you have the tag <code>alpha.eksctl.io/cluster-name</code> with the cluster name as its value. If you don&rsquo;t have the tag, you can add it via the AWS Console by navigating to IAM-&gt;Identity providers-&gt;Your OIDC-&gt;Tags.</li>
</ol>
<h2 id="20-setup-rds-s3-and-configure-secrets">2.0 Setup RDS, S3 and configure Secrets</h2>
<p>There are two ways to create the RDS and S3 resources before you deploy the Kubeflow manifests. Either use the automated python script we have provided by following the steps in section 2.1 or fall back on the manual setup steps as in section 2.2 below -</p>
<h3 id="21-option-1-automated-setup">2.1 <strong>Option 1: Automated Setup</strong></h3>
<p>This setup performs all the manual steps in an automated fashion.<br>
The script takes care of creating the S3 bucket, creating the S3 secrets using the secrets manager, setting up the RDS database and creating the RDS secret using the secrets manager. It also edits the required configuration files for Kubeflow pipeline to be properly configured for the RDS database during Kubeflow installation.<br>
The script also handles cases where the resources already exist in which case it will simply skips the step.</p>
<p>Note : The script will <strong>not</strong> delete any resource therefore if a resource already exists (eg: secret, database with the same name or S3 bucket etc), <strong>it will skip the creation of those resources and use the existing resources instead</strong>. This was done in order to prevent unwanted results such as accidental deletion. For instance, if a database with the same name already exists, the script will skip the database creation setup. If it&rsquo;s expected in your scenario, then perhaps this is fine for you, if you simply forgot to change the database name used for creation then this gives you the chance to retry the script with the proper value. See <code>python auto-rds-s3-setup.py --help</code> for the list of parameters as well as their default values.</p>
<ol>
<li>Navigate to the Navigate to <code>tests/e2e</code> directory</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>cd tests/e2e
</span></span></code></pre></div><ol start="2">
<li>Install the script dependencies <code>pip install -r requirements.txt</code></li>
<li><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_create.html#id_users_create_cliwpsapi">Create an IAM user</a> with permissions to get bucket location and allow read and write access to objects in an S3 bucket where you want to store the Kubeflow artifacts. Use the <code>AWS_ACCESS_KEY_ID</code> and <code>AWS_SECRET_ACCESS_KEY</code> of the IAM user below:</li>
<li>Export values for <code>CLUSTER_REGION</code>, <code>CLUSTER_NAME</code>, <code>S3_BUCKET</code>, <code>AWS_ACCESS_KEY_ID</code>, and <code>AWS_SECRET_ACCESS_KEY</code> then run the script</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>export CLUSTER_REGION=
</span></span><span style="display:flex;"><span>export CLUSTER_NAME=
</span></span><span style="display:flex;"><span>export S3_BUCKET=
</span></span><span style="display:flex;"><span>export AWS_ACCESS_KEY_ID=
</span></span><span style="display:flex;"><span>export AWS_SECRET_ACCESS_KEY=
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>PYTHONPATH=.. python utils/rds-s3/auto-rds-s3-setup.py --region $CLUSTER_REGION --cluster $CLUSTER_NAME --bucket $S3_BUCKET --s3_aws_access_key_id $AWS_ACCESS_KEY_ID --s3_aws_secret_access_key $AWS_SECRET_ACCESS_KEY
</span></span></code></pre></div><h3 id="advanced-customization">Advanced customization</h3>
<p>The script applies some sensible default values for the db user password, max storage, storage type, instance type etc but if you know what you are doing, you can always tweak those preferences by passing different values.<br>
You can learn more about the different parameters by running <code>PYTHONPATH=.. python utils/rds-s3/auto-rds-s3-setup.py --help</code>.</p>
<h3 id="22-option-2-manual-setup">2.2 <strong>Option 2: Manual Setup</strong></h3>
<p>If you prefer to manually setup each components then you can follow this manual guide.</p>
<ol>
<li>
<p>[S3] Create an S3 Bucket</p>
<p>Refer to the <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/GetStartedWithS3.html">S3 documentation</a> for steps on creating an <code>S3 bucket</code>.
To complete the following steps you will need to keep track of the <code>S3 bucket name</code>.</p>
</li>
<li>
<p>[RDS] Create an RDS Instance</p>
<p>Refer to the <a href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_GettingStarted.CreatingConnecting.MySQL.html">RDS documentation</a> for steps on creating an <code>RDS MySQL instance</code>.</p>
<p>When creating the RDS instance for security and connectivity reasons we recommend that:</p>
<ul>
<li>The RDS instance is in the same VPC as the cluster</li>
<li>The RDS instance subnets must belong to at least 2 private subnets within the VPC</li>
<li>The RDS instance security group is the same security group used by the EKS node instances</li>
</ul>
<p>To complete the following steps you will need to keep track of the following:</p>
<ul>
<li><code>RDS database name</code> (not to be confused with the <code>DB identifier</code>)</li>
<li><code>RDS database admin username</code></li>
<li><code>RDS database admin password</code></li>
<li><code>RDS database endpoint URL</code></li>
<li><code>RDS database port</code></li>
</ul>
</li>
<li>
<p>Create Secrets in AWS Secrets Manager</p>
<ol>
<li>
<p>[RDS] Create the RDS secret and configure the secret provider:</p>
<ol>
<li>Configure a secret, for example named <code>rds-secret</code>, with the RDS DB name, RDS endpoint URL, RDS DB port, and RDS DB credentials that were configured when following the steps in Create RDS Instance.
<ul>
<li>For example, if your database name is <code>kubeflow</code>, your endpoint URL is <code>rm12abc4krxxxxx.xxxxxxxxxxxx.us-west-2.rds.amazonaws.com</code>, your DB port is <code>3306</code>, your DB username is <code>admin</code>, and your DB password is <code>Kubefl0w</code> your secret should look like:</li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>export RDS_SECRET=&lt;your rds secret name&gt;
</span></span><span style="display:flex;"><span>aws secretsmanager create-secret --name $RDS_SECRET --secret-string &#39;{&#34;username&#34;:&#34;admin&#34;,&#34;password&#34;:&#34;Kubefl0w&#34;,&#34;database&#34;:&#34;kubeflow&#34;,&#34;host&#34;:&#34;rm12abc4krxxxxx.xxxxxxxxxxxx.us-west-2.rds.amazonaws.com&#34;,&#34;port&#34;:&#34;3306&#34;}&#39; --region $CLUSTER_REGION
</span></span></code></pre></div></li>
</ul>
</li>
<li>Rename the <code>parameters.objects.objectName</code> field in <a href="../../../awsconfigs/common/aws-secrets-manager/rds/secret-provider.yaml">the rds secret provider configuration</a> to the name of the secret.
<ul>
<li>One line command:
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>yq e -i &#39;.spec.parameters.objects |= sub(&#34;rds-secret&#34;,env(RDS_SECRET))&#39; awsconfigs/common/aws-secrets-manager/rds/secret-provider.yaml
</span></span></code></pre></div></li>
<li>For example, if your secret name is <code>rds-secret-new</code>, the configuration would look like:</li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>apiVersion: secrets-store.csi.x-k8s.io/v1alpha1
</span></span><span style="display:flex;"><span>kind: SecretProviderClass
</span></span><span style="display:flex;"><span>metadata:
</span></span><span style="display:flex;"><span>   name: rds-secret
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   ...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   parameters:
</span></span><span style="display:flex;"><span>      objects: | 
</span></span><span style="display:flex;"><span>      - objectName: &#34;rds-secret-new&#34; # This line was changed
</span></span><span style="display:flex;"><span>        objectType: &#34;secretsmanager&#34;
</span></span><span style="display:flex;"><span>        jmesPath:
</span></span><span style="display:flex;"><span>           - path: &#34;username&#34;
</span></span><span style="display:flex;"><span>              objectAlias: &#34;user&#34;
</span></span><span style="display:flex;"><span>           - path: &#34;password&#34;
</span></span><span style="display:flex;"><span>              objectAlias: &#34;pass&#34;
</span></span><span style="display:flex;"><span>           - path: &#34;host&#34;
</span></span><span style="display:flex;"><span>              objectAlias: &#34;host&#34;
</span></span><span style="display:flex;"><span>           - path: &#34;database&#34;
</span></span><span style="display:flex;"><span>              objectAlias: &#34;database&#34;
</span></span><span style="display:flex;"><span>           - path: &#34;port&#34;
</span></span><span style="display:flex;"><span>              objectAlias: &#34;port&#34;
</span></span></code></pre></div></li>
</ul>
</li>
</ol>
</li>
<li>
<p>[S3] Create the S3 secret and configure the secret provider:</p>
<ol>
<li>Configure a secret, for example named <code>s3-secret</code>, with your AWS credentials. These need to be long term credentials from an IAM user and not temporary.
<ul>
<li>Find more details about configuring/getting your AWS credentials here:
<a href="https://docs.aws.amazon.com/general/latest/gr/aws-security-credentials.html">https://docs.aws.amazon.com/general/latest/gr/aws-security-credentials.html</a></li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>export S3_SECRET=&lt;your s3 secret name&gt;
</span></span><span style="display:flex;"><span>aws secretsmanager create-secret --name S3_SECRET --secret-string &#39;{&#34;accesskey&#34;:&#34;AXXXXXXXXXXXXXXXXXX6&#34;,&#34;secretkey&#34;:&#34;eXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXq&#34;}&#39; --region $CLUSTER_REGION
</span></span></code></pre></div></li>
</ul>
</li>
<li>Rename the <code>parameters.objects.objectName</code> field in <a href="../../../awsconfigs/common/aws-secrets-manager/s3/secret-provider.yaml">the s3 secret provider configuration</a> to the name of the secret.
<ul>
<li>One line command:
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>yq e -i &#39;.spec.parameters.objects |= sub(&#34;s3-secret&#34;,env(S3_SECRET))&#39; awsconfigs/common/aws-secrets-manager/s3/secret-provider.yaml
</span></span></code></pre></div></li>
<li>For example, if your secret name is <code>s3-secret-new</code>, the configuration would look like:</li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>apiVersion: secrets-store.csi.x-k8s.io/v1alpha1
</span></span><span style="display:flex;"><span>kind: SecretProviderClass
</span></span><span style="display:flex;"><span>metadata:
</span></span><span style="display:flex;"><span>  name: s3-secret
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  parameters:
</span></span><span style="display:flex;"><span>    objects: | 
</span></span><span style="display:flex;"><span>      - objectName: &#34;s3-secret-new&#34; # This line was changed
</span></span><span style="display:flex;"><span>        objectType: &#34;secretsmanager&#34;
</span></span><span style="display:flex;"><span>        jmesPath:
</span></span><span style="display:flex;"><span>            - path: &#34;accesskey&#34;
</span></span><span style="display:flex;"><span>              objectAlias: &#34;access&#34;
</span></span><span style="display:flex;"><span>            - path: &#34;secretkey&#34;
</span></span><span style="display:flex;"><span>              objectAlias: &#34;secret&#34;           
</span></span></code></pre></div></li>
</ul>
</li>
</ol>
</li>
</ol>
</li>
<li>
<p>Install AWS Secrets &amp; Configuration Provider with Kubernetes Secrets Store CSI driver</p>
<ol>
<li>Run the following commands to enable oidc and create an iamserviceaccount with permissions to retrieve the secrets created from AWS Secrets Manager</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>eksctl utils associate-iam-oidc-provider --region=$CLUSTER_REGION --cluster=$CLUSTER_NAME --approve
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>eksctl create iamserviceaccount  --name kubeflow-secrets-manager-sa  --namespace kubeflow  --cluster $CLUSTER_NAME --attach-policy-arn  arn:aws:iam::aws:policy/AmazonSSMReadOnlyAccess --attach-policy-arn arn:aws:iam::aws:policy/SecretsManagerReadWrite --override-existing-serviceaccounts   --approve --region $CLUSTER_REGION
</span></span></code></pre></div><ol start="2">
<li>Run these commands to install AWS Secrets &amp; Configuration Provider with Kubernetes Secrets Store CSI driver</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span> kubectl apply -f https://raw.githubusercontent.com/kubernetes-sigs/secrets-store-csi-driver/v1.0.0/deploy/rbac-secretproviderclass.yaml
</span></span><span style="display:flex;"><span> kubectl apply -f https://raw.githubusercontent.com/kubernetes-sigs/secrets-store-csi-driver/v1.0.0/deploy/csidriver.yaml
</span></span><span style="display:flex;"><span> kubectl apply -f https://raw.githubusercontent.com/kubernetes-sigs/secrets-store-csi-driver/v1.0.0/deploy/secrets-store.csi.x-k8s.io_secretproviderclasses.yaml
</span></span><span style="display:flex;"><span> kubectl apply -f https://raw.githubusercontent.com/kubernetes-sigs/secrets-store-csi-driver/v1.0.0/deploy/secrets-store.csi.x-k8s.io_secretproviderclasspodstatuses.yaml
</span></span><span style="display:flex;"><span> kubectl apply -f https://raw.githubusercontent.com/kubernetes-sigs/secrets-store-csi-driver/v1.0.0/deploy/secrets-store-csi-driver.yaml
</span></span><span style="display:flex;"><span> kubectl apply -f https://raw.githubusercontent.com/kubernetes-sigs/secrets-store-csi-driver/v1.0.0/deploy/rbac-secretprovidersyncing.yaml
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> kubectl apply -f https://raw.githubusercontent.com/aws/secrets-store-csi-driver-provider-aws/main/deployment/aws-provider-installer.yaml
</span></span></code></pre></div></li>
<li>
<p>Update the KFP configurations</p>
<ol>
<li>
<p>[RDS] Configure the <a href="../../../awsconfigs/apps/pipeline/rds/params.env">RDS params file</a> with the RDS endpoint url and the metadata db name.</p>
<p>For example, if your RDS endpoint URL is <code>rm12abc4krxxxxx.xxxxxxxxxxxx.us-west-2.rds.amazonaws.com</code> and your metadata db name is <code>metadata_db</code> your <code>params.env</code> file should look like:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span> dbHost=rm12abc4krxxxxx.xxxxxxxxxxxx.us-west-2.rds.amazonaws.com
</span></span><span style="display:flex;"><span> mlmdDb=metadata_db
</span></span></code></pre></div></li>
<li>
<p>[S3] Configure the <a href="../../../awsconfigs/apps/pipeline/s3/params.env">S3 params file</a> with with the <code>S3 bucket name</code>, and <code>S3 bucket region</code>..</p>
<p>For example, if your S3 bucket name is <code>kf-aws-demo-bucket</code> and s3 bucket region is <code>us-west-2</code> your <code>params.env</code> file should look like:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span> bucketName=kf-aws-demo-bucket
</span></span><span style="display:flex;"><span> minioServiceHost=s3.amazonaws.com
</span></span><span style="display:flex;"><span> minioServiceRegion=us-west-2
</span></span></code></pre></div></li>
</ol>
</li>
</ol>
<h2 id="30-build-manifests-and-install-kubeflow">3.0 Build Manifests and Install Kubeflow</h2>
<p>Once you have the resources ready, you can continue on to deploying the Kubeflow manifests using the single line command below -</p>
<p>Choose one of the deployment options from below:</p>
<ul>
<li>Deploying the configuration for both RDS and S3</li>
<li>Deploying the configuration for RDS only</li>
<li>Deploying the configuration for S3 only</li>
</ul>
<h4 id="rds-and-s3-deploy-both-rds-and-s3">[RDS and S3] Deploy both RDS and S3</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">while</span> ! kustomize build docs/deployment/rds-s3 <span style="color:#000;font-weight:bold">|</span> kubectl apply -f -<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">do</span> <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;Retrying to apply resources&#34;</span><span style="color:#000;font-weight:bold">;</span> sleep 10<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">done</span>
</span></span></code></pre></div><h4 id="rds-deploy-rds-only">[RDS] Deploy RDS only</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">while</span> ! kustomize build docs/deployment/rds-s3/rds-only <span style="color:#000;font-weight:bold">|</span> kubectl apply -f -<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">do</span> <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;Retrying to apply resources&#34;</span><span style="color:#000;font-weight:bold">;</span> sleep 10<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">done</span>
</span></span></code></pre></div><h4 id="s3-deploy-s3-only">[S3] Deploy S3 only</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">while</span> ! kustomize build docs/deployment/rds-s3/s3-only <span style="color:#000;font-weight:bold">|</span> kubectl apply -f -<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">do</span> <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;Retrying to apply resources&#34;</span><span style="color:#000;font-weight:bold">;</span> sleep 10<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">done</span>
</span></span></code></pre></div><p>Once, everything is installed successfully, you can access the Kubeflow Central Dashboard <a href="../vanilla/README.md#connect-to-your-kubeflow-cluster">by logging in to your cluster</a>.</p>
<p>Congratulations! You can now start experimenting and running your end-to-end ML workflows with Kubeflow.</p>
<h2 id="40-verify-the-installation">4.0 Verify the installation</h2>
<h3 id="41-verify-rds">4.1 Verify RDS</h3>
<ol>
<li>Connect to the RDS instance from a pod within the cluster</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>kubectl run -it --rm --image=mysql:5.7 --restart=Never mysql-client -- mysql -h &lt;YOUR RDS ENDPOINT&gt; -u &lt;YOUR LOGIN&gt; -p&lt;YOUR PASSWORD&gt;
</span></span></code></pre></div><p>Note that you can find your credentials by visiting <a href="https://aws.amazon.com/secrets-manager/">aws secrets manager</a> or by using <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/secretsmanager/get-secret-value.html">AWS CLI</a></p>
<p>For instance, to retrieve the value of a secret named <code>rds-secret</code>, we would do :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>aws secretsmanager get-secret-value \
</span></span><span style="display:flex;"><span>    --region $CLUSTER_REGION \
</span></span><span style="display:flex;"><span>    --secret-id rds-secret \
</span></span><span style="display:flex;"><span>    --query &#39;SecretString&#39; \
</span></span><span style="display:flex;"><span>    --output text
</span></span></code></pre></div><ol start="2">
<li>Once connected verify the databases <code>kubeflow</code> and <code>mlpipeline</code> exist.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>mysql&gt; show databases;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>+--------------------+
</span></span><span style="display:flex;"><span>| Database           |
</span></span><span style="display:flex;"><span>+--------------------+
</span></span><span style="display:flex;"><span>| information_schema |
</span></span><span style="display:flex;"><span>| kubeflow           |
</span></span><span style="display:flex;"><span>| mlpipeline         |
</span></span><span style="display:flex;"><span>| mysql              |
</span></span><span style="display:flex;"><span>| performance_schema |
</span></span><span style="display:flex;"><span>+--------------------+
</span></span></code></pre></div><ol start="3">
<li>Verify the database <code>mlpipeline</code> has the following tables:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>mysql&gt; use mlpipeline; show tables;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>+----------------------+
</span></span><span style="display:flex;"><span>| Tables_in_mlpipeline |
</span></span><span style="display:flex;"><span>+----------------------+
</span></span><span style="display:flex;"><span>| db_statuses          |
</span></span><span style="display:flex;"><span>| default_experiments  |
</span></span><span style="display:flex;"><span>| experiments          |
</span></span><span style="display:flex;"><span>| jobs                 |
</span></span><span style="display:flex;"><span>| pipeline_versions    |
</span></span><span style="display:flex;"><span>| pipelines            |
</span></span><span style="display:flex;"><span>| resource_references  |
</span></span><span style="display:flex;"><span>| run_details          |
</span></span><span style="display:flex;"><span>| run_metrics          |
</span></span><span style="display:flex;"><span>+----------------------+
</span></span></code></pre></div><ol start="4">
<li>
<p>Access the Kubeflow Central Dashboard <a href="../vanilla/README.md#connect-to-your-kubeflow-cluster">by logging in to your cluster</a> and navigate to Katib (under Experiments (AutoML)).</p>
</li>
<li>
<p>Create an experiment using the following <a href="../../../tests/e2e/resources/custom-resource-templates/katib-experiment-random.yaml">yaml file</a>.</p>
</li>
<li>
<p>Once the experiment is complete verify the following table exists:</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>mysql&gt; use kubeflow; show tables;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>+----------------------+
</span></span><span style="display:flex;"><span>| Tables_in_kubeflow   |
</span></span><span style="display:flex;"><span>+----------------------+
</span></span><span style="display:flex;"><span>| observation_logs     |
</span></span><span style="display:flex;"><span>+----------------------+
</span></span></code></pre></div><ol start="7">
<li>Describe <code>observation_logs</code> to verify it is being populated.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>mysql&gt; select * from observation_logs;
</span></span></code></pre></div><h3 id="42-verify-s3">4.2 Verify S3</h3>
<ol>
<li>
<p>Access the Kubeflow Central Dashboard <a href="../vanilla/README.md#connect-to-your-kubeflow-cluster">by logging in to your cluster</a> and navigate to Kubeflow Pipelines (under Pipelines).</p>
</li>
<li>
<p>Create an experiment named <code>test</code> and create a run using the sample pipeline <code>[Demo] XGBoost - Iterative model training</code>.</p>
</li>
<li>
<p>Once the run is completed go to the S3 AWS console and open the bucket you specified for the Kubeflow installation.</p>
</li>
<li>
<p>Verify the bucket is not empty and was populated by outputs of the experiment.</p>
</li>
</ol>
<h2 id="50-uninstall-kubeflow">5.0 Uninstall Kubeflow</h2>
<p>Run the following command to uninstall:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kustomize build docs/deployment/rds-s3 <span style="color:#000;font-weight:bold">|</span> kubectl delete -f -
</span></span></code></pre></div><p>Additionally, the following cleanup steps may be required:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl delete mutatingwebhookconfigurations.admissionregistration.k8s.io webhook.eventing.knative.dev webhook.istio.networking.internal.knative.dev webhook.serving.knative.dev
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>kubectl delete validatingwebhookconfigurations.admissionregistration.k8s.io config.webhook.eventing.knative.dev config.webhook.istio.networking.internal.knative.dev config.webhook.serving.knative.dev
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>kubectl delete endpoints -n default mxnet-operator pytorch-operator tf-operator
</span></span></code></pre></div><p>To uninstall AWS resources created by the automated setup run the cleanup script</p>
<ol>
<li>Navigate to the Navigate to <code>tests/e2e</code> directory</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>cd tests/e2e
</span></span></code></pre></div><ol start="2">
<li>Install the script dependencies <code>pip install -r requirements.txt</code></li>
<li>Make sure you have the configuration file created by the script in <code>tests/e2e/utils/rds-s3/metadata.yaml</code></li>
<li>Export values for <code>CLUSTER_REGION</code> then run the script</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>EXPORT CLUSTER_REGION=
</span></span><span style="display:flex;"><span>PYTHONPATH=.. python utils/rds-s3/auto-rds-s3-cleanup.py --region $CLUSTER_REGION 
</span></span></code></pre></div>
	
		<style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<div class="card mt-4 col-12 col-sm-6">
  <div class="card-body">
    <h3 class="card-title">Feedback</h3>
    <p class="card-text">Was this page helpful?</p>
    <button class="btn btn-primary feedback--answer feedback--answer-yes" style="width: 5rem;">Yes</button>
    <button class="btn btn-primary feedback--answer feedback--answer-no" style="width: 5rem;">No</button>
    <p class="feedback--response feedback--response-yes">
      Glad to hear it! Please <a href="https://github.com/awslabs/kubeflow-manifests/issues/new?assignees=&labels=documentation&template=documentation-request.md&title=">tell us how we can improve</a>.
    </p>
    <p class="feedback--response feedback--response-no">
      Sorry to hear that. Please <a href="https://github.com/awslabs/kubeflow-manifests/issues/new?assignees=&labels=documentation&template=documentation-request.md&title=">tell us how we can improve</a>.
    </p>
  </div>
</div>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof ga !== 'function') return;
    const args = {
      command: 'send',
      hitType: 'event',
      category: 'Helpful',
      action: 'click',
      label: window.location.pathname,
      value: value
    };
    ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(1);
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>

		<br />
	
	
	<div class="text-muted mt-5 pt-3 border-top">
  Last modified April 19, 2022: <a href="https://github.com/awslabs/kubeflow-manifests/docs/commit/ea3c69aff5d03dce79257b33642663908b2929f3">Syncing About, Deployment, and Components section (ea3c69a)</a>
</div>

</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark pt-3 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
      </div>
      <div class="col text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2022 The Kubeflow on AWS Authors.</small>
        
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
    integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA=="
    crossorigin="anonymous"></script>





<script src='/kubeflow-manifests/js/tabpane-persist.js'></script>


















<script src="/kubeflow-manifests/js/main.min.d33ba880dcae2a9badacbf2fb5e36200904b2b546035ace68e637312fcf7d133.js" integrity="sha256-0zuogNyuKputrL8vteNiAJBLK1RgNazmjmNzEvz30TM=" crossorigin="anonymous"></script>




  </body>
</html>