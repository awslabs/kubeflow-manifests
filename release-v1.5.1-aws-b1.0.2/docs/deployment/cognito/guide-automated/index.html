<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.93.0" />
<meta name="robots" content="index, follow">

<script type="application/ld+json">
  {
      "@context" : "http://schema.org",
      "@type" : "WebSite",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "https:\/\/awslabs.github.io\/kubeflow-manifests\/release-v1.5.1-aws-b1.0.2"
      },
      "articleSection" : "docs",
      "name" : "Automated Deployment Guide",
      "headline" : "Automated Deployment Guide",
      "description" : "Deploying Kubeflow with AWS Cognito as identity provider using setup scripts",
      "inLanguage" : "en-US",
      "author" : "",
      "creator" : "",
      "publisher": "",
      "accountablePerson" : "",
      "copyrightHolder" : "",
      "copyrightYear" : "0001",
      "datePublished": "0001-01-01 00:00:00 \u002b0000 UTC",
      "dateModified" : "0001-01-01 00:00:00 \u002b0000 UTC",
      "url" : "https:\/\/awslabs.github.io\/kubeflow-manifests\/release-v1.5.1-aws-b1.0.2\/docs\/deployment\/cognito\/guide-automated\/",
      "wordCount" : "617",
      "keywords" : [ "Kubeflow" ]
  }
  </script>

<link rel="shortcut icon" href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/favicons/favicon-32x32.png" sizes="32x32">
<link rel="manifest" href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/favicons/manifest.json">
<meta name="msapplication-config" content="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/favicons/browserconfig.xml" />
<meta name="msapplication-TileColor" content="#4279f4">
<meta name="theme-color" content="#4279f4">

<title>Automated Deployment Guide | Kubeflow on AWS</title>
<meta name="description" content="Deploying Kubeflow with AWS Cognito as identity provider using setup scripts">
<meta property="og:title" content="Automated Deployment Guide" />
<meta property="og:description" content="Deploying Kubeflow with AWS Cognito as identity provider using setup scripts" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://awslabs.github.io/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/cognito/guide-automated/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2023-01-07T02:20:02-05:00" /><meta property="og:site_name" content="Kubeflow on AWS" />

<meta itemprop="name" content="Automated Deployment Guide">
<meta itemprop="description" content="Deploying Kubeflow with AWS Cognito as identity provider using setup scripts">
<meta itemprop="dateModified" content="2023-01-07T02:20:02-05:00" />
<meta itemprop="wordCount" content="617">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Automated Deployment Guide"/>
<meta name="twitter:description" content="Deploying Kubeflow with AWS Cognito as identity provider using setup scripts"/>




<link rel="preload" href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/scss/main.min.cfd7574257326fddbc6f33f260c0bda4c6d74394ebf2531282625a18d0a19e75.css" as="style">
<link href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/scss/main.min.cfd7574257326fddbc6f33f260c0bda4c6d74394ebf2531282625a18d0a19e75.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

    
    <link href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/css/syntax.min.css" rel="stylesheet">

    
    <link href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/css/copy-code-button.min.css" rel="stylesheet">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />


  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand-md navbar-dark  td-navbar">
        <a class="navbar-brand" href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">Kubeflow on AWS</span>
	</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main_navbar" aria-controls="main_navbar" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse ml-md-auto" id="main_navbar">
		<ul class="navbar-nav ml-auto pt-4 pt-md-0 my-2 my-md-1">
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				<div id="docsearch"></div>
			</li>

			
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/" ><i class='fas fa-book pr-2'></i><span>Documentation</span></a>
			</li>
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/kubeflow-manifests/blog/" ><i class='fas fa-blog pr-2'></i><span>Blog</span></a>
			</li>
			
			<li class="nav-item mr-2 mr-lg-4 mt-1 mt-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://github.com/awslabs/kubeflow-manifests" target="_blank" ><i class='fab fa-github pr-2'></i><span>GitHub</span></a>
			</li>
			
			
			<li class="nav-item dropdown mt-1 mt-lg-0 mr-2">
				<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Releases
</a>
<div class="dropdown-menu dropdown-menu-md-right dropdown-menu-lg-left" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="https://awslabs.github.io/kubeflow-manifests/docs">latest</a>
	
	<a class="dropdown-item" href="https://awslabs.github.io/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs">v1.5</a>
	
	<a class="dropdown-item" href="https://awslabs.github.io/kubeflow-manifests/release-v1.4.1-aws-b1.0.0/docs">v1.4</a>
	
	<a class="dropdown-item" href="https://awslabs.github.io/kubeflow-manifests/main/docs">dev</a>
	
</div>

			</li>
			
			
		</ul>
	</div>
	
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="collapse td-sidebar-nav foldable-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-kubeflow-manifestsrelease-v151-aws-b102docs-li">
  <a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-kubeflow-manifestsrelease-v151-aws-b102docs"><span class="">Documentation</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docsabout-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsabout-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsabout-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/about/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsrelease-v151-aws-b102docsabout"><span class="">About</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docsaboutfeatures-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsaboutfeatures-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsaboutfeatures-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/about/features/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docsaboutfeatures"><span class="">AWS Features for Kubeflow</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docsaboutreleases-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsaboutreleases-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsaboutreleases-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/about/releases/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docsaboutreleases"><span class="">Releases and Versioning</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docsabouteks-compatibility-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsabouteks-compatibility-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsabouteks-compatibility-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/about/eks-compatibility/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docsabouteks-compatibility"><span class="">Amazon EKS and Kubeflow Compatibility</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docsaboutsecurity-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsaboutsecurity-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsaboutsecurity-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/about/security/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docsaboutsecurity"><span class="">Security</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docsaboutusage-tracking-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsaboutusage-tracking-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsaboutusage-tracking-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/about/usage-tracking/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docsaboutusage-tracking"><span class="">Usage Tracking</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeployment-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeployment-check" checked/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsdeployment-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeployment"><span class="">Deployment</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentprerequisites-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentprerequisites-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentprerequisites-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/prerequisites/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentprerequisites"><span class="">Prerequisites</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentvanillaguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentvanillaguide-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentvanillaguide-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/vanilla/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentvanillaguide"><span class="">Vanilla Installation</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentrds-s3guide-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentrds-s3guide-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentrds-s3guide-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/rds-s3/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentrds-s3guide"><span class="">RDS and S3</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentcognito-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentcognito-check" checked/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentcognito-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/cognito/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentcognito"><span class="">Cognito</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentcognitoguide-automated-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentcognitoguide-automated-check" checked/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentcognitoguide-automated-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/cognito/guide-automated/" class="align-left pl-0  active td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentcognitoguide-automated"><span class="td-sidebar-nav-active-item">Automated Deployment Guide</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentcognitoguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentcognitoguide-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentcognitoguide-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/cognito/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentcognitoguide"><span class="">Manual Deployment Guide</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentcognito-rds-s3guide-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentcognito-rds-s3guide-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentcognito-rds-s3guide-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/cognito-rds-s3/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentcognito-rds-s3guide"><span class="">Cognito, RDS, and S3</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-ons-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-ons-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-ons-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/add-ons/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-ons"><span class="">Add-ons</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-onsload-balancerguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-onsload-balancerguide-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-onsload-balancerguide-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/add-ons/load-balancer/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-onsload-balancerguide"><span class="">Load Balancer</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-onsstorageefsguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-onsstorageefsguide-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-onsstorageefsguide-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/add-ons/storage/efs/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-onsstorageefsguide"><span class="">EFS</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-onsstoragefsx-for-lustreguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-onsstoragefsx-for-lustreguide-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-onsstoragefsx-for-lustreguide-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/add-ons/storage/fsx-for-lustre/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-onsstoragefsx-for-lustreguide"><span class="">FSx for Lustre</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-onscloudwatchguide-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-onscloudwatchguide-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-onscloudwatchguide-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/add-ons/cloudwatch/guide/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentadd-onscloudwatchguide"><span class="">CloudWatch</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentuninstall-kubeflow-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentuninstall-kubeflow-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentuninstall-kubeflow-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/uninstall-kubeflow/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docsdeploymentuninstall-kubeflow"><span class="">Uninstall Kubeflow</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guides-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guides-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guides-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/component-guides/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guides"><span class="">Component Guides</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guidesnotebooks-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guidesnotebooks-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guidesnotebooks-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/component-guides/notebooks/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guidesnotebooks"><span class="">Notebooks</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guideskatib-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guideskatib-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guideskatib-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/component-guides/katib/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guideskatib"><span class="">Katib</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guidespipelines-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guidespipelines-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guidespipelines-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/component-guides/pipelines/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guidespipelines"><span class="">Pipelines</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guideskserve-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guideskserve-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guideskserve-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/component-guides/kserve/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guideskserve"><span class="">KServe</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guidesprofiles-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guidesprofiles-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guidesprofiles-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/component-guides/profiles/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docscomponent-guidesprofiles"><span class="">Profiles</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-kubeflow-manifestsrelease-v151-aws-b102docstroubleshooting-aws-li">
  <input type="checkbox" id="m-kubeflow-manifestsrelease-v151-aws-b102docstroubleshooting-aws-check"/>
  <label for="m-kubeflow-manifestsrelease-v151-aws-b102docstroubleshooting-aws-check"><a href="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/troubleshooting-aws/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-kubeflow-manifestsrelease-v151-aws-b102docstroubleshooting-aws"><span class="">Troubleshooting</span></a></label>
  
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href="https://github.com/awslabs/kubeflow-manifests//tree/main/website/content/en/docs/deployment/cognito/guide-automated.md" class="td-page-meta--view" target="_blank" rel="noopener"><i class="fa fa-file-alt fa-fw"></i> View page source</a>
  <a href="https://github.com/awslabs/kubeflow-manifests//edit/main/website/content/en/docs/deployment/cognito/guide-automated.md" class="td-page-meta--edit" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
  <a href="https://github.com/awslabs/kubeflow-manifests//new/main/website/content/en/docs/deployment/cognito/guide-automated.md?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Create child page</a>
  <a href="https://github.com/awslabs/kubeflow-manifests//issues/new?title=Automated%20Deployment%20Guide" class="td-page-meta--issue" target="_blank" rel="noopener"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/awslabs/kubeflow-manifests/issues/new" class="td-page-meta--project-issue" target="_blank" rel="noopener"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>
  
</div>

            


<div class="td-toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#prerequisites">Prerequisites</a></li>
    <li><a href="#create-required-resources-and-deploy-kubeflow">Create required resources and deploy Kubeflow</a></li>
    <li><a href="#uninstall-kubeflow">Uninstall Kubeflow</a></li>
  </ul>
</nav></div>



            

	
		



  
  

	
		



  
  

	

          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="https://awslabs.github.io/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/">Documentation</a>
  </li>
  <li class="breadcrumb-item">
    <a href="https://awslabs.github.io/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/">Deployment</a>
  </li>
  <li class="breadcrumb-item">
    <a href="https://awslabs.github.io/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/cognito/">Cognito</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">
    <a href="https://awslabs.github.io/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/cognito/guide-automated/">Automated Deployment Guide</a>
  </li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Automated Deployment Guide</h1>
	<div class="lead">Deploying Kubeflow with AWS Cognito as identity provider using setup scripts</div>
	<header class="article-meta">
		

  
    


  
    


  

		
	</header>    
	<p>This guide describes how to deploy Kubeflow on AWS EKS using Cognito as identity provider. Kubeflow uses Istio to manage internal traffic. In this guide we will be creating an Ingress to manage external traffic to the Kubernetes services and an Application Load Balancer (ALB) to provide public DNS and enable TLS authentication at the load balancer. We will also be creating a custom domain to host Kubeflow since certificates (needed for TLS) for ALB&rsquo;s public DNS names are not supported.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>This guide assumes you have Python 3.8 installed and that you have completed the <a href="https://awslabs.github.io/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/prerequisites/">prerequisites</a>.</p>
<h2 id="create-required-resources-and-deploy-kubeflow">Create required resources and deploy Kubeflow</h2>
<ol>
<li>
<p>The following steps automate <a href="https://awslabs.github.io/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/cognito/guide/#10-custom-domain-and-certificates">section 1.0(Custom domain and certificates)</a> (creating a custom domain to host Kubeflow and TLS certificates for the domain), <a href="https://awslabs.github.io/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/cognito/guide/#20-cognito-user-pool">section 2.0(Cognito user pool)</a> (creating a Cognito Userpool used for user authentication) and<a href="https://awslabs.github.io/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/cognito/guide/#30-configure-ingress">section 3.0(Configure Ingress)</a> (configuring ingress and load balancer controller manifests) of the cognito guide.</p>
<ol>
<li>Install dependencies for the scripts
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">pip install -r tests/e2e/requirements.txt
</span></span></code></pre></div></li>
<li>Substitute values in <code>tests/e2e/utils/cognito_bootstrap/config.yaml</code>.
<ol>
<li>Registed root domain in <code>route53.rootDomain.name</code>. Lets assume this domain is <code>example.com</code>
<ol>
<li>If your domain is managed in route53, enter the Hosted zone ID found under Hosted zone details in <code>route53.rootDomain.hostedZoneId</code>. Skip this step if your domain is managed by other domain provider.</li>
</ol>
</li>
<li>Name of the sudomain you want to host Kubeflow (e.g. <code>platform.example.com</code>) in <code>route53.subDomain.name</code>. Please read <a href="https://awslabs.github.io/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/add-ons/load-balancer/guide/#create-domain-and-certificates">this section</a> to understand why we use a subdomain.</li>
<li>Cluster name and region where kubeflow will be deployed in <code>cluster.name</code> and <code>cluster.region</code> (e.g. us-west-2) respectively.</li>
<li>Name of cognito userpool in <code>cognitoUserpool.name</code> e.g. kubeflow-users.</li>
<li>The config file will look something like:
<ol>
<li>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="w"> </span><span class="nt">cognitoUserpool</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">kubeflow-users</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">cluster</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">kube-eks-cluster</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l">us-west-2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">route53</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">rootDomain</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">hostedZoneId</span><span class="p">:</span><span class="w"> </span><span class="l">XXXX</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">example.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">subDomain</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">platform.example.com</span><span class="w">
</span></span></span></code></pre></div></li>
</ol>
</li>
</ol>
</li>
<li>Run the script to create the resources
<ol>
<li>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"> <span class="nb">cd</span> tests/e2e
</span></span><span class="line"><span class="cl"> <span class="nv">PYTHONPATH</span><span class="o">=</span>.. python utils/cognito_bootstrap/cognito_pre_deployment.py
</span></span><span class="line"><span class="cl"> <span class="nb">cd</span> -
</span></span></code></pre></div></li>
</ol>
</li>
<li>The script will update the config file with the resource names/ids/ARNs it created. It will look something like:
<ol>
<li>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="w"> </span><span class="nt">cognitoUserpool</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">ARN</span><span class="p">:</span><span class="w"> </span><span class="l">arn:aws:cognito-idp:us-west-2:123456789012:userpool/us-west-2_yasI9dbxF</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">appClientId</span><span class="p">:</span><span class="w"> </span><span class="l">5jmk7ljl2a74jk3n0a0fvj3l31</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">domainAliasTarget</span><span class="p">:</span><span class="w"> </span><span class="l">xxxxxxxxxx.cloudfront.net</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">domain</span><span class="p">:</span><span class="w"> </span><span class="l">auth.platform.example.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">kubeflow-users</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">kubeflow</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">alb</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">serviceAccount</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">             </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">alb-ingress-controller</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">             </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">kubeflow</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">             </span><span class="nt">policyArn</span><span class="p">:</span><span class="w"> </span><span class="l">arn:aws:iam::123456789012:policy/alb_ingress_controller_kube-eks-clusterxxx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">cluster</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">kube-eks-cluster</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l">us-west-2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">route53</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">rootDomain</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">certARN</span><span class="p">:</span><span class="w"> </span><span class="l">arn:aws:acm:us-east-1:123456789012:certificate/9d8c4bbc-3b02-4a48-8c7d-d91441c6e5af</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">hostedZoneId</span><span class="p">:</span><span class="w"> </span><span class="l">XXXXX</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">example.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">subDomain</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">us-west-2-certARN</span><span class="p">:</span><span class="w"> </span><span class="l">arn:aws:acm:us-west-2:123456789012:certificate/d1d7b641c238-4bc7-f525-b7bf-373cc726</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">hostedZoneId</span><span class="p">:</span><span class="w"> </span><span class="l">XXXXX</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">platform.example.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">us-east-1-certARN</span><span class="p">:</span><span class="w"> </span><span class="l">arn:aws:acm:us-east-1:123456789012:certificate/373cc726-f525-4bc7-b7bf-d1d7b641c238</span><span class="w">
</span></span></span></code></pre></div></li>
</ol>
</li>
</ol>
</li>
<li>
<p>Install Kubeflow using the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> <span class="k">while</span> ! kustomize build deployments/cognito <span class="p">|</span> kubectl apply -f -<span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="s2">&#34;Retrying to apply resources&#34;</span><span class="p">;</span> sleep 30<span class="p">;</span> <span class="k">done</span>
</span></span></code></pre></div></li>
<li>
<p>Updating the domain with ALB address</p>
<ol>
<li>Check if ALB is provisioned. It takes around 3-5 minutes
<ol>
<li>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"> kubectl get ingress -n istio-system
</span></span><span class="line"><span class="cl"> Warning: extensions/v1beta1 Ingress is deprecated in v1.14+, unavailable in v1.22+<span class="p">;</span> use networking.k8s.io/v1 Ingress
</span></span><span class="line"><span class="cl"> NAME            CLASS    HOSTS   ADDRESS                                                              PORTS   AGE
</span></span><span class="line"><span class="cl"> istio-ingress   &lt;none&gt;   *       k8s-istiosys-istioing-xxxxxx-110050202.us-west-2.elb.amazonaws.com   <span class="m">80</span>      15d
</span></span></code></pre></div></li>
<li>If <code>ADDRESS</code> is empty after a few minutes, check the logs of alb-ingress-controller by following <a href="https://awslabs.github.io/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/troubleshooting-aws/#alb-fails-to-provision">this guide</a></li>
</ol>
</li>
<li>Substitute the ALB address under <code>kubeflow.alb.dns</code> in <code>tests/e2e/utils/cognito_bootstrap/config.yaml</code>. The kubeflow section of the config file will look like:
<ol>
<li>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="w"> </span><span class="nt">kubeflow</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">alb</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">dns</span><span class="p">:</span><span class="w"> </span><span class="l">ebde55ee-istiosystem-istio-2af2-1100502020.us-west-2.elb.amazonaws.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">serviceAccount</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">             </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">alb-ingress-controller</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">             </span><span class="nt">policyArn</span><span class="p">:</span><span class="w"> </span><span class="l">arn:aws:iam::123456789012:policy/alb_ingress_controller_kube-eks-clusterxxx</span><span class="w">
</span></span></span></code></pre></div></li>
</ol>
</li>
<li>Run the following script to update the subdomain with ALB address
<ol>
<li>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"> <span class="nb">cd</span> tests/e2e
</span></span><span class="line"><span class="cl"> <span class="nv">PYTHONPATH</span><span class="o">=</span>.. python utils/cognito_bootstrap/cognito_post_deployment.py
</span></span><span class="line"><span class="cl"> <span class="nb">cd</span> -
</span></span></code></pre></div></li>
</ol>
</li>
</ol>
</li>
<li>
<p>Follow the rest of the cognito guide from <a href="https://awslabs.github.io/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/docs/deployment/cognito/guide/#60-connecting-to-central-dashboard">section 6.0(Connecting to central dashboard)</a> to:</p>
<ol>
<li>Create a user in Cognito user pool</li>
<li>Create a profile for the user from the user pool</li>
<li>Connect to the central dashboard</li>
</ol>
</li>
</ol>
<h2 id="uninstall-kubeflow">Uninstall Kubeflow</h2>
<blockquote>
<p>Note: Delete all the resources you might have created in your profile namespaces before running these steps.</p>
</blockquote>
<ol>
<li>Run the following commands to delete the profiles, ingress and corresponding ingress managed load balancer
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> kubectl delete profiles --all
</span></span><span class="line"><span class="cl"> kubectl delete ingress -n istio-system istio-ingress
</span></span></code></pre></div></li>
<li>Delete the kubeflow deployment
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> kustomize build deployments/cognito <span class="p">|</span> kubectl delete -f -
</span></span></code></pre></div></li>
<li>To delete the rest of resources(subdomain, certificates etc.), run the following commands from the root of your repository:
<blockquote>
<p>Note: Make sure that you have the configuration file created by the script in <code>tests/e2e/utils/cognito_bootstrap/config.yaml</code>. If you did not use the script, plug in the name, ARN, or ID of the resources that you created in a yaml file in <code>tests/e2e/utils/cognito_bootstrap/config.yaml</code> by referring to the following sample:</p>
</blockquote>
<ul>
<li>Sample config file:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">cognitoUserpool</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ARN</span><span class="p">:</span><span class="w"> </span><span class="l">arn:aws:cognito-idp:us-west-2:123456789012:userpool/us-west-2_yasI9dbxF</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">appClientId</span><span class="p">:</span><span class="w"> </span><span class="l">5jmk7ljl2a74jk3n0a0fvj3l31</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">domainAliasTarget</span><span class="p">:</span><span class="w"> </span><span class="l">xxxxxxxxxx.cloudfront.net</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">domain</span><span class="p">:</span><span class="w"> </span><span class="l">auth.platform.example.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">kubeflow-users</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kubeflow</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">alb</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">serviceAccount</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">alb-ingress-controller</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">kubeflow</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">policyArn</span><span class="p">:</span><span class="w"> </span><span class="l">arn:aws:iam::123456789012:policy/alb_ingress_controller_kube-eks-clusterxxx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">cluster</span><span class="p">:</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">kube-eks-cluster</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l">us-west-2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">route53</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rootDomain</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">certARN</span><span class="p">:</span><span class="w"> </span><span class="l">arn:aws:acm:us-east-1:123456789012:certificate/9d8c4bbc-3b02-4a48-8c7d-d91441c6e5af</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">hostedZoneId</span><span class="p">:</span><span class="w"> </span><span class="l">XXXXX</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">example.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">subDomain</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">us-west-2-certARN</span><span class="p">:</span><span class="w"> </span><span class="l">arn:aws:acm:us-west-2:123456789012:certificate/d1d7b641c238-4bc7-f525-b7bf-373cc726</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">hostedZoneId</span><span class="p">:</span><span class="w"> </span><span class="l">XXXXX</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">platform.example.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">us-east-1-certARN</span><span class="p">:</span><span class="w"> </span><span class="l">arn:aws:acm:us-east-1:123456789012:certificate/373cc726-f525-4bc7-b7bf-d1d7b641c238</span><span class="w">
</span></span></span></code></pre></div><ul>
<li>Run the following command to install the script dependencies and delete the resources:</li>
</ul>
<blockquote>
<p>Note: You can rerun the script incase some resources fail to delete</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> tests/e2e
</span></span><span class="line"><span class="cl">pip install -r requirements.txt
</span></span><span class="line"><span class="cl"><span class="nv">PYTHONPATH</span><span class="o">=</span>.. python utils/cognito_bootstrap/cognito_resources_cleanup.py
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> -
</span></span></code></pre></div></li>
</ol>

	
	
	<div class="text-muted mt-5 pt-3 border-top">
  Last modified January 7, 2023: <a href="https://github.com/awslabs/kubeflow-manifests//commit/8c282f1ce5c65fabfb19e78f6fcfb191cc9cf7de">docsearch backport 1.5 (#535) (8c282f1)</a>
</div>

</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark pt-3 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
      </div>
      <div class="col text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2023 The Kubeflow on AWS Authors.</small>
        
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
    integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA=="
    crossorigin="anonymous"></script>





<script src='/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/js/tabpane-persist.js'></script>


















<script src="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/js/main.min.fb3621b8083924840ef938617e1bf3abd6e2d284d6e2e34650dfe11266f86529.js" integrity="sha256-&#43;zYhuAg5JIQO&#43;Thhfhvzq9bi0oTW4uNGUN/hEmb4ZSk=" crossorigin="anonymous"></script>




<script src="/kubeflow-manifests/release-v1.5.1-aws-b1.0.2/js/copy-code-button.min.js"></script>


<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>

<script type="text/javascript">

docsearch({

appId: 'A1FXAERJE4',

apiKey: '88f3a753878f24ffdcd3d786be775545',

indexName: 'kubeflow-manifests',

container: '#docsearch',

searchParameters: {
    facetFilters: ["version: 1.5 "],
  },
debug: true 

});
</script>



  </body>
</html>